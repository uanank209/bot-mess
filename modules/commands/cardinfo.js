module.exports.config = {
	name: "cardinfo",
	version: "0.0.1",
	hasPermssion: 0,
	credits: "tpk",
	description: "",
	commandCategory: "Th√†nh Vi√™n",
    cooldowns: 5
};
module.exports.circle = async (image) => {
  const jimp = global.nodemodule["jimp"];
  image = await jimp.read(image);
  image.circle();
  return await image.getBufferAsync("image/png");
}
module.exports.run = async ({ event, api, args, Currencies, Users}) => {
  const request = require("request");
const fs = require("fs");

   const { threadID, messageID, senderID } = event;
     var tpk = [
       "https://i.imgur.com/dZ3BoHv.png",
]
  let image = [];
 for(let i = 0; i < 1; i++) {
    const stream = (await axios.get(tpk[i], {
        responseType: "stream"
    })).data;
    image.push(stream);
};
  const msg = {
    body: `üî∞====„Äé ùóñùóîùó•ùóóùóúùó°ùóôùó¢ ùó¶ùóîùó†ùó£ùóüùóò „Äè====üî∞
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
ùü≠. ùóñùóÆùóøùó±ùó∂ùóªùó≥ùóº ùó±ùóÆÃ£ùóªùó¥ ùóªùó≤ÃÇÃÄùóª ùóÆùóªùó∂ùó∫ùó≤ ùó∞ùòÇùòÅùó≤ üòª
ùüÆ. ùóñùóÆùóøùó±ùó∂ùóªùó≥ùóº ùóØùóÆùó∞ùó∏ùó¥ùóøùóºùòÇùóªùó± ƒëùó≤ùóª üñ§
ùüØ. ùóñùóÆùóøùó±ùó∂ùóªùó≥ùóº ùòÇùòÄùó≤ùóø ùó±ùóÆÃ£ùóªùó¥ ùóªùó≤ÃÇÃÄùóª ùòÅùóøùóÆÃÜÃÅùóªùó¥ ùòÖùóÆùóªùóµ üíô
ùü∞. ùóïùóÆùó∞ùó∏ùó¥ùóøùóºùòÇùóªùó± ùó∞ùóµùó∂ÃÅùóªùóµ ùòÅùóøùóÆÃÜÃÅùóªùó¥ ùóΩùóµùòÇÃ£ ùòÖùóÆùóªùóµ üíñ
ùü±. ùóñùóÆùóøùó±ùó∂ùóªùó≥ùóº ùó°ùó≤ÃÇÃÄùóª ùó∞ùóµùó∂ÃÅùóªùóµ ùòÅùó∂ÃÅùó∫ ùóΩùóµùòÇÃ£ ùòÖùóÆùóªùóµ üíú
ùü≤. ùóñùóÆùóøùó± ùó∂ùóªùó≥ùóºùóøùó∫ùóÆùòÅùó∂ùóºùóª ùó∞ùóµùòÇÃâ ƒëùó≤ÃÇÃÄ ùóÆùóªùó∂ùó∫ùó≤ üíì
ùü≥. ùóñùóÆùóøùó±ùó∂ùóªùó≥ùóº ùóªùó≤ÃÇÃÄùóª ùó∞ùóµùó∂ÃÅùóªùóµ ùòÖùóÆùóªùóµ ùóπùòÇÃ£ùó∞ ùóΩùóµùòÇÃ£ ùòÉùóÆÃÄùóªùó¥ üíö
ùü¥. ùóñùóÆùóøùó±ùó∂ùóªùó≥ùóº ùóªùó≤ÃÇÃÄùóª ùóªùó¥ùóºùóÆÃÄùó∂ ùó∏ùóµùóºÃÇùóªùó¥ ùó¥ùó∂ùóÆùóª üåç
ùüµ. ùóñùóÆùóøùó±ùó∂ùóªùó≥ùóº ùóØùóÆùó∞ùó∏ùó¥ùóøùóºùòÇùóªùó± ùóªùóµùòÇÃõÃÉùóªùó¥ ùóªùó¥ùóºÃÇùó∂ ùòÄùóÆùóº üåü
ùü≠ùü¨. ùóñùóÆùóøùó±ùó∂ùóªùó≥ùóº ùóªùó≤ÃÇÃÄùóª ùòÅùó≤ÃÇÃÅùòÅ ùó∫ùóÆÃÄùòÇ ùòÉùóÆÃÄùóªùó¥|ƒëùóºÃâ üßß
ùü≠ùü≠. ùóñùóÆùóøùó±ùó∂ùóªùó≥ùóº ùóØùóÆùó∞ùó∏ùó¥ùóøùóºùòÇùóªùó± ùó∞ùóµùó∂ùó≤ÃÇÃÅùóª ùòÅùóøùòÇÃõùóºÃõÃÄùóªùó¥ üî´
ùü≠ùüÆ. ùóñùóÆùóøùó±ùó∂ùóªùó≥ùóº ùóªùó≤ÃÇÃÄùóª ùòÅùóøùóÆÃÜÃÅùóªùó¥ ùó∫ùóÆÃÄùòÇ ùóΩùóµùòÇÃ£ ùóµùóºÃÇÃÄùóªùó¥ ü§ç
ùü≠ùüØ. ùóñùóÆùóøùó±ùó∂ùóªùó≥ùóº ùóØùóÆùó∞ùó∏ùó¥ùóøùóºùòÇùóªùó± ùó∫ùóÆÃÅùòÜ ùó∫ùóºÃÅùó∞ üîß
ùü≠ùü∞. ùóñùóÆùóøùó±ùó∂ùóªùó≥ùóº ùóôùóÆùó∞ùó≤ùóØùóºùóºùó∏ ùóªùó≤ÃÇÃÄùóª ùòÅùóøùóÆÃÜÃÅùóªùó¥ ùòÖùóÆùóªùóµ üåê
ùü≠ùü±. ùóñùóÆùóøùó±ùó∂ùóªùó≥ùóº ùòÅùóµùóºÃÇùóªùó¥ ùòÅùó∂ùóª ùó∞ùóÆùóøùó±ùó∂ùóªùó≥ùóº ùòÇùòÄùó≤ùóø ùòÉùüØ üå∏
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
‚ö†Ô∏è ùó£ùóµùóÆÃâùóª ùóµùóºÃÇÃÄùó∂ ùòÉùóÆÃÄùóº ùòÅùó∂ùóª ùóªùóµùóÆÃÜÃÅùóª ùóªùóÆÃÄùòÜ + ùòÄùóºÃÇÃÅ ùòÅùóµùòÇÃõÃÅ ùòÅùòÇÃõÃ£ ùó∫ùóÆÃÇÃÉùòÇ ùó∫ùòÇùóºÃÇÃÅùóª ùóπùóÆÃÄùó∫
üíù ùóõùó∂ùó≤Ã£ÃÇùóª ùòÅùóÆÃ£ùó∂ ùó∞ùóºÃÅ ùü≠ùü± ùóπùóºùóÆÃ£ùó∂ ùó∞ùóÆùóøùó±ùó∂ùóªùó≥ùóº ùóØùóÆÃ£ùóª ùó∞ùóºÃÅ ùòÅùóµùó≤ÃÇÃâ ùòÅùóµùóÆ ùóµùóºÃÇÃÄ ùó∞ùóµùóºÃ£ùóª`,
    attachment: image
};
        return api.sendMessage(msg, event.threadID, (error, info) => {
        
            global.client.handleReply.push({
                type: "choosee",
                name: this.config.name,
                author: event.senderID,
                messageID: info.messageID
            })
        })
    }
    module.exports.handleReply = async function ({
    args,
    event,
    Users,
    api,
    handleReply,
    Currencies,
    __GLOBAL
}) {
  const axios = require("axios");
  const fs = require("fs-extra");
  const request = require("request");
       const nameUser = (await Users.getData(event.senderID)).name || (await Users.getInfo(envent.senderID)).name;
  let data = (await Currencies.getData(event.senderID)).ghepTime;
 
    
    switch (handleReply.type) {
    case "choosee": {
        switch (event.body) {
        case "1": {
          const fonts = "/cache/Play-Bold.ttf"
const downfonts = "https://drive.google.com/u/0/uc?id=1uni8AiYk7prdrC7hgAmezaGTMH5R8gW8&export=download"
const fontsLink = 20
const fontsInfo = 28
const colorName = "#00FF00"
       let { senderID, threadID, messageID } = event;
  const { loadImage, createCanvas } = require("canvas");
  const request = require('request');
  const fs = global.nodemodule["fs-extra"];
  const axios = global.nodemodule["axios"];
  const Canvas = global.nodemodule["canvas"];
  let pathImg = __dirname + `/cache/${senderID}123${threadID}.png`;
  let pathAvata = __dirname + `/cache/avtuserrd.png`;
  /*                 */
const res = await api.getUserInfoV2(event.senderID);
  let getAvatarOne = (await axios.get(`https://graph.facebook.com/${event.senderID}/picture?height=512&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`, { responseType: 'arraybuffer' })).data;
  let bg = (
    await axios.get(encodeURI(`https://imgur.com/kSfS1wX.png`), {
      responseType: "arraybuffer",
    })
  ).data;
  fs.writeFileSync(pathAvata, Buffer.from(getAvatarOne, 'utf-8'));
  avataruser = await this.circle(pathAvata);
  fs.writeFileSync(pathImg, Buffer.from(bg, "utf-8"));

/*-----------------download----------------------*/
if(!fs.existsSync(__dirname+`${fonts}`)) { 
      let getfont = (await axios.get(`${downfonts}`, { responseType: "arraybuffer" })).data;
       fs.writeFileSync(__dirname+`${fonts}`, Buffer.from(getfont, "utf-8"));
    };
/*---------------------------------------------*/

  let baseImage = await loadImage(pathImg);
  let baseAvata = await loadImage(avataruser);
  let canvas = createCanvas(baseImage.width, baseImage.height);
  let ctx = canvas.getContext("2d");
  ctx.drawImage(baseImage, 0, 0, canvas.width, canvas.height);
  ctx.drawImage(baseAvata, 50, 130, 270, 270);
if (!res.location || res.location === "Kh√¥ng c√¥ng khai") res.location = "Kh√¥ng c√¥ng khai";
  if (!res.birthday || res.birthday === "Kh√¥ng c√¥ng khai") res.birthday = "Kh√¥ng c√¥ng khai";
if (!res.relationship_status || res.relationship_status === "Kh√¥ng c√¥ng khai") res.relationship_status = "Kh√¥ng c√¥ng khai";
  if (!res.follow || res.follow === "Kh√¥ng c√¥ng khai") res.follow = "Kh√¥ng c√¥ng khai";
    var gender = res.gender == 'male' ? "Nam" : res.gender == 'female' ? "N·ªØ" : "Kh√¥ng c√¥ng khai";
    var birthday = res.birthday ? `${res.birthday}` : "Kh√¥ng c√¥ng khai";
  //var love = res.relationship_status ? `${res.relationship_status}` : "Kh√¥ng c√¥ng khai"
  var love = res.relationship_status ? `${res.relationship_status}` : "Kh√¥ng c√¥ng khai"
    var location = res.location ? `${res.location}` : "Kh√¥ng c√¥ng khai"
          var hometown = res.hometown.name ? `${res.hometown.name}` : "N√≥ ·∫©n r·ªìi"
  Canvas.registerFont(__dirname+`${fonts}`, {
        family: "Play-Bold"
    });
  ctx.font = `${fontsInfo}px Play-Bold`;
  ctx.fillStyle = "#D3D3D3";
  ctx.textAlign = "start";
  fontSize = 22;
  ctx.fillText(`Full Name : ${res.name}`, 410, 172);
  ctx.fillStyle = "#99CCFF";
  ctx.textAlign = "start";
  fontSize = 22;
  ctx.fillText(`Gi·ªõi t√≠nh: ${gender}`, 410, 208);
ctx.fillStyle = "#FFFFE0";
  ctx.textAlign = "start";
  fontSize = 22;
  ctx.fillText(`Followers: ${res.follow} followers`, 410, 244);
  ctx.fillStyle = "#FFE4E1";
  ctx.textAlign = "start";
  fontSize = 22;
  ctx.fillText(`Relationship: ${love}`, 410, 281);
  ctx.fillStyle = "#9AFF9A";
  ctx.textAlign = "start";
  fontSize = 22;
  ctx.fillText(`Birthday: ${birthday}`, 410, 320);
  ctx.fillStyle = "#FF6A6A";
  ctx.textAlign = "start";
  fontSize = 22;
  ctx.fillText(`Location: ${hometown}`, 410, 357);
ctx.fillStyle = "#EEC591";
  ctx.textAlign = "start";
  fontSize = 22;
  ctx.fillText(`UID Facebook: ${uid}`, 410, 397);
  ctx.font = `${fontsLink}px Play-Bold`;
  ctx.fillStyle = "#FFBBFF";
  ctx.textAlign = "start";
  fontSize = 23;  
  ctx.fillText(`Link Facebook: ${res.link}`, 30, 450);
  ctx.beginPath();
  const imageBuffer = canvas.toBuffer();
  fs.writeFileSync(pathImg, imageBuffer);
  fs.removeSync(pathAvata);
  var tpk = `
üòª===„Äå ùóñùóîùó•ùóóùóúùó°ùóôùó¢ ùóñùó®ùóßùóò „Äç===üòª
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üë§ ùóßùó≤ÃÇùóª: ${res.name}
üéé ùóöùó∂ùóºÃõÃÅùó∂ ùòÅùó∂ÃÅùóªùóµ: ${gender}
üî∞ ùóôùóºùóπùóπùóºùòÑùó≤ùóøùòÄ: ${res.follow}
üíñ ùó†ùóºÃÇÃÅùó∂ ùóæùòÇùóÆùóª ùóµùó≤Ã£ÃÇ: ${love}
üéÇ ùó¶ùó∂ùóªùóµ ùóªùóµùóÆÃ£ÃÇùòÅ: ${birthday}
üåç ùó©ùó∂Ã£ ùòÅùóøùó∂ÃÅ: ${hometown}
üîó ùó®ùóúùóó ùóôùóÆùó∞ùó≤ùóØùóºùóºùó∏: ${uid}
üåê ùóüùó∂ùóªùó∏ ùóôùóÆùó∞ùó≤ùóØùóºùóºùó∏: ${res.link}
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üëâ ùóßùóÆÃ£ùóº ùòÅùóµùóÆÃÄùóªùóµ ùó∞ùóºÃÇùóªùó¥ ùó∞ùóÆùóøùó±ùó∂ùóªùó≥ùóº ùó∞ùóµùóº ùóØùóÆÃ£ùóª, ùóØùóÆÃ£ùóª ùó∞ùóºÃÅ ùòÅùóµùó≤ÃÇÃâ ùòÅùóµùòÇÃõÃâ ùóªùóµùó∂ùó≤ÃÇÃÄùòÇ ùó∏ùó∂ùó≤ÃÇÃâùòÇ ùó∏ùóµùóÆÃÅùó∞`
  return api.sendMessage({body: tpk,
     attachment: fs.createReadStream(pathImg) },
    threadID,
    () => fs.unlinkSync(pathImg),
    messageID
  );
};
        case "2": {
          const sendWaiting = false; // b·∫≠t ho·∫∑c t·∫Øt g·ª≠i tin nh·∫Øn "ƒëang t·∫°o h√¨nh ·∫£nh, vui ·ªìng ch·ªù ƒë·ª£i...";
const textWaiting = "ƒêang kh·ªüi t·∫°o h√¨nh ·∫£nh, vui l√≤ng ch·ªù ƒë·ª£i trong gi√¢y l√°t";
const fonts = "/cache/Play-Bold.ttf"
const downfonts = "https://drive.google.com/u/0/uc?id=1uni8AiYk7prdrC7hgAmezaGTMH5R8gW8&export=download"
const fontsLink = 28
const fontsInfo = 35
const colorName = "#00FFFF"
          let { senderID, threadID, messageID } = event;
  const { loadImage, createCanvas } = require("canvas");
  const request = require('request');
  const fs = global.nodemodule["fs-extra"];
  const axios = global.nodemodule["axios"];
  const Canvas = global.nodemodule["canvas"];
  let pathImg = __dirname + `/cache/1.png`;
  let pathAvata = __dirname + `/cache/2.png`;
  /*                 */
    const res = await api.getUserInfoV2(event.senderID); 
  let getAvatarOne = (await axios.get(`https://graph.facebook.com/${event.senderID}/picture?height=1500&width=1500&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`, { responseType: 'arraybuffer' })).data;
  let bg = (
    await axios.get(encodeURI(`https://i.imgur.com/rqbC4ES.jpg`), {
      responseType: "arraybuffer",
    })
  ).data;
  fs.writeFileSync(pathAvata, Buffer.from(getAvatarOne, 'utf-8'));
  avataruser = await this.circle(pathAvata);
  fs.writeFileSync(pathImg, Buffer.from(bg, "utf-8"));

/*-----------------download----------------------*/
if(!fs.existsSync(__dirname+`${fonts}`)) { 
      let getfont = (await axios.get(`${downfonts}`, { responseType: "arraybuffer" })).data;
       fs.writeFileSync(__dirname+`${fonts}`, Buffer.from(getfont, "utf-8"));
    };
/*---------------------------------------------*/

  let baseImage = await loadImage(pathImg);
  let baseAvata = await loadImage(avataruser);
  let canvas = createCanvas(baseImage.width, baseImage.height);
  let ctx = canvas.getContext("2d");
  ctx.drawImage(baseImage, 0, 0, canvas.width, canvas.height);
  ctx.drawImage(baseAvata, 910, 465, 229, 229);
    var gender = res.gender == 'male' ? "Nam" : res.gender == 'female' ? "NuÃõÃÉ" : "Kh√¥ng c√¥ng khai";
    var birthday = res.birthday ? `${res.birthday}` : "N√≥ ·∫©n r·ªìi";
    var love = res.relationship_status ? `${res.relationship_status}` : "N√≥ ·∫©n r·ªìi"
    var location = res.location.name ? `${res.location.name}` : "N√≥ ·∫©n r·ªìi"
    var hometown = res.hometown.name ? `${res.hometown.name}` : "N√≥ ·∫©n r·ªìi"
  Canvas.registerFont(__dirname+`${fonts}`, {
        family: "Play-Bold"
    });
  ctx.font = `${fontsInfo}px Play-Bold`;
  ctx.fillStyle = "#00FFFF";
  ctx.textAlign = "start";
  fontSize = 60;
  ctx.fillText(`T√™n: ${res.name}`, 340, 560);
  ctx.fillText(`Gi·ªõi t√≠nh: ${gender}`, 1245, 448);
  ctx.fillText(`Follow: ${res.follow}`, 1245, 505);
  ctx.fillText(`M·ªëi quan h·ªá: ${love}`, 1245, 559);
  ctx.fillText(`Sinh nh·∫≠t: ${birthday}`, 1245, 616);
  ctx.fillText(`N∆°i ·ªü: ${location}`, 1245, 668);
  ctx.fillText(`Qu√™ h∆∞∆°ng: ${hometown}`, 1245, 723);
  ctx.font = `${fontsLink}px Play-Bold`;
  ctx.fillStyle = "#FFCC33";
  ctx.textAlign = "start";
  fontSize = 60;
  ctx.fillText(`UID: ${uid}`, 840, 728);
  ctx.beginPath();
  ctx.font = `${fontsLink}px TUVBenchmark`;
  ctx.fillStyle = "#00FF00";
  ctx.textAlign = "start";
  fontSize = 60;  
  ctx.fillText(`¬ª Profile: ${res.link}`, 41, 720);
  ctx.beginPath();
  const imageBuffer = canvas.toBuffer();
  fs.writeFileSync(pathImg, imageBuffer);
  fs.removeSync(pathAvata);
  var tpk = `
üå∏===„Äå ùóúùó°ùóôùó¢ ùóñùóîùó•ùóó „Äç===üå∏
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üë§ ùóßùó≤ÃÇùóª: ${res.name}
üéé ùóöùó∂ùóºÃõÃÅùó∂ ùòÅùó∂ÃÅùóªùóµ: ${gender}
üî∞ ùóôùóºùóπùóπùóºùòÑùó≤ùóøùòÄ: ${res.follow}
üíñ ùó†ùóºÃÇÃÅùó∂ ùóæùòÇùóÆùóª ùóµùó≤Ã£ÃÇ: ${love}
üéÇ ùó¶ùó∂ùóªùóµ ùóªùóµùóÆÃ£ÃÇùòÅ: ${birthday}
üåç ùó©ùó∂Ã£ ùòÅùóøùó∂ÃÅ: ${hometown}
üîó ùó®ùóúùóó ùóôùóÆùó∞ùó≤ùóØùóºùóºùó∏: ${uid}
üåê ùóüùó∂ùóªùó∏ ùóôùóÆùó∞ùó≤ùóØùóºùóºùó∏: ${res.link}
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üëâ ùóßùóÆÃ£ùóº ùòÅùóµùóÆÃÄùóªùóµ ùó∞ùóºÃÇùóªùó¥ ùó∞ùóÆùóøùó±ùó∂ùóªùó≥ùóº ùó∞ùóµùóº ùóØùóÆÃ£ùóª, ùóØùóÆÃ£ùóª ùó∞ùóºÃÅ ùòÅùóµùó≤ÃÇÃâ ùòÅùóµùòÇÃõÃâ ùóªùóµùó∂ùó≤ÃÇÃÄùòÇ ùó∏ùó∂ùó≤ÃÇÃâùòÇ ùó∏ùóµùóÆÃÅùó∞`
  return api.sendMessage({body: tpk, attachment: fs.createReadStream(pathImg) },
    threadID,
    () => fs.unlinkSync(pathImg),
    messageID
  );
};
            case "3": {
              const sendWaiting = false; // b·∫≠t ho·∫∑c t·∫Øt g·ª≠i tin nh·∫Øn "ƒëang t·∫°o h√¨nh ·∫£nh, vui ·ªìng ch·ªù ƒë·ª£i...";
const textWaiting = "ƒêang kh·ªüi t·∫°o h√¨nh ·∫£nh, vui l√≤ng ch·ªù ƒë·ª£i trong gi√¢y l√°t";
const fonts = "/cache/Play-Bold.ttf"
const downfonts = "https://drive.google.com/u/0/uc?id=1uni8AiYk7prdrC7hgAmezaGTMH5R8gW8&export=download"
const fontsLink = 40
const fontsInfo = 28
const colorName = "#000000"
              let { senderID, threadID, messageID } = event;
  const { loadImage, createCanvas } = require("canvas");
  const request = require('request');
  const fs = global.nodemodule["fs-extra"];
  const axios = global.nodemodule["axios"];
  const Canvas = global.nodemodule["canvas"];
  let pathImg = __dirname + `/cache/1.png`;
  let pathAvata = __dirname + `/cache/2.png`;
  /*                 */
    const res = await api.getUserInfoV2(event.senderID); 
  let getAvatarOne = (await axios.get(`https://graph.facebook.com/${event.senderID}/picture?height=1500&width=1500&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`, { responseType: 'arraybuffer' })).data;
  let bg = (
    await axios.get(encodeURI(`https://i.imgur.com/zET6S0F.png`), {
      responseType: "arraybuffer",
    })
  ).data;
  fs.writeFileSync(pathAvata, Buffer.from(getAvatarOne, 'utf-8'));
  avataruser = await this.circle(pathAvata);
  fs.writeFileSync(pathImg, Buffer.from(bg, "utf-8"));

/*-----------------download----------------------*/
if(!fs.existsSync(__dirname+`${fonts}`)) { 
      let getfont = (await axios.get(`${downfonts}`, { responseType: "arraybuffer" })).data;
       fs.writeFileSync(__dirname+`${fonts}`, Buffer.from(getfont, "utf-8"));
    };
/*---------------------------------------------*/

  let baseImage = await loadImage(pathImg);
  let baseAvata = await loadImage(avataruser);
  let canvas = createCanvas(baseImage.width, baseImage.height);
  let ctx = canvas.getContext("2d");
  ctx.drawImage(baseImage, 0, 0, canvas.width, canvas.height);
  ctx.drawImage(baseAvata, 71, 65, 300, 300);
    var gender = res.gender == 'male' ? "Nam" : res.gender == 'female' ? "NuÃõÃÉ" : "Kh√¥ng c√¥ng khai";
    var birthday = res.birthday ? `${res.birthday}` : "Kh√¥ng c√¥ng khai";
    var love = res.relationship_status ? `${res.relationship_status}` : "Kh√¥ng c√¥ng khai"
    var location = res.location.name ? `${res.location.name}` : "Kh√¥ng c√¥ng khai"
    var hometown = res.hometown.name ? `${res.hometown.name}` : "Kh√¥ng c√¥ng khai"
  Canvas.registerFont(__dirname+`${fonts}`, {
        family: "Play-Bold"
    });
  ctx.font = `${fontsInfo}px Play-Bold`;
  ctx.fillStyle = "#000000";
  ctx.textAlign = "start";
  fontSize = 20;
  ctx.fillText(`${gender}`, 555, 208);
  ctx.fillText(`${res.follow}`, 555, 244);
  ctx.fillText(`${love}`, 555, 281);
  ctx.fillText(`${birthday}`, 555, 320);
  ctx.fillText(`${location}`, 555, 357);
  ctx.fillText(`${uid}`, 555, 397);
  ctx.fillText(`${res.link}`, 180, 468);
  ctx.font = `${fontsLink}px Play-Bold`;
  ctx.fillStyle = "#000000";
  ctx.textAlign = "start";
  fontSize = 20;  
  ctx.fillText(`${res.name}`, 650, 150);
  ctx.beginPath();
  const imageBuffer = canvas.toBuffer();
  fs.writeFileSync(pathImg, imageBuffer);
  fs.removeSync(pathAvata);
  var tpk = `
üß∏===„Äå ùóñùóîùó•ùóóùóúùó°ùóôùó¢ ùó®ùó¶ùóòùó• „Äç===üß∏
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üë§ ùóßùó≤ÃÇùóª: ${res.name}
üéé ùóöùó∂ùóºÃõÃÅùó∂ ùòÅùó∂ÃÅùóªùóµ: ${gender}
üî∞ ùóôùóºùóπùóπùóºùòÑùó≤ùóøùòÄ: ${res.follow}
üíñ ùó†ùóºÃÇÃÅùó∂ ùóæùòÇùóÆùóª ùóµùó≤Ã£ÃÇ: ${love}
üéÇ ùó¶ùó∂ùóªùóµ ùóªùóµùóÆÃ£ÃÇùòÅ: ${birthday}
üåç ùó©ùó∂Ã£ ùòÅùóøùó∂ÃÅ: ${location}
üîó ùó®ùóúùóó ùóôùóÆùó∞ùó≤ùóØùóºùóºùó∏: ${uid}
üåê ùóüùó∂ùóªùó∏ ùóôùóÆùó∞ùó≤ùóØùóºùóºùó∏: ${res.link}
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üëâ ùóßùóÆÃ£ùóº ùòÅùóµùóÆÃÄùóªùóµ ùó∞ùóºÃÇùóªùó¥ ùó∞ùóÆùóøùó±ùó∂ùóªùó≥ùóº ùó∞ùóµùóº ùóØùóÆÃ£ùóª, ùóØùóÆÃ£ùóª ùó∞ùóºÃÅ ùòÅùóµùó≤ÃÇÃâ ùòÅùóµùòÇÃõÃâ ùóªùóµùó∂ùó≤ÃÇÃÄùòÇ ùó∏ùó∂ùó≤ÃÇÃâùòÇ ùó∏ùóµùóÆÃÅùó∞`
  return api.sendMessage({body: tpk ,attachment: fs.createReadStream(pathImg) },
    threadID,
    () => fs.unlinkSync(pathImg),
    messageID
  );
};
          case "4": {
              const fonts = "/cache/Play-Bold.ttf"
const downfonts = "https://drive.google.com/u/0/uc?id=1uni8AiYk7prdrC7hgAmezaGTMH5R8gW8&export=download"
const fontsLink = 20
const fontsInfo = 28
const colorName = "#000000"
              let { senderID, threadID, messageID } = event;
  const { loadImage, createCanvas } = require("canvas");
  const request = require('request');
  const fs = global.nodemodule["fs-extra"];
  const axios = global.nodemodule["axios"];
  const Canvas = global.nodemodule["canvas"];
  let pathImg = __dirname + `/cache/${senderID}123${threadID}.png`;
  let pathAvata = __dirname + `/cache/avtuserrd.png`;
  /*                 */
  if(event.type == "message_reply") { uid = event.messageReply.senderID }
    else uid = event.senderID;
    const res = await api.getUserInfoV2(event.senderID);
      let getAvatarOne = (await axios.get(`https://graph.facebook.com/${event.senderID}/picture?height=720&width=720&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`, { responseType: 'arraybuffer' })).data;
  let bg = (
    await axios.get(encodeURI(`https://i.imgur.com/C8yIgMZ.png`), {
      responseType: "arraybuffer",
    })
  ).data;
  fs.writeFileSync(pathAvata, Buffer.from(getAvatarOne, 'utf-8'));
  avataruser = await this.circle(pathAvata);
  fs.writeFileSync(pathImg, Buffer.from(bg, "utf-8"));

/*-----------------download----------------------*/
if(!fs.existsSync(__dirname+`${fonts}`)) { 
      let getfont = (await axios.get(`${downfonts}`, { responseType: "arraybuffer" })).data;
       fs.writeFileSync(__dirname+`${fonts}`, Buffer.from(getfont, "utf-8"));
    };
/*---------------------------------------------*/

  let baseImage = await loadImage(pathImg);
  let baseAvata = await loadImage(avataruser);
  let canvas = createCanvas(baseImage.width, baseImage.height);
  let ctx = canvas.getContext("2d");
  ctx.drawImage(baseImage, 0, 0, canvas.width, canvas.height);
  ctx.drawImage(baseAvata, 610, 83, 255, 255);
    if (!res.location || res.location === "Kh√¥ng C√≥ D·ªØ Li·ªáu") res.location = "Kh√¥ng C√¥ng Khai";
  if (!res.birthday || res.birthday === "Kh√¥ng C√≥ D·ªØ Li·ªáu") res.birthday = "Kh√¥ng C√¥ng Khai";
if (!res.relationship_status || res.relationship_status === "Kh√¥ng C√≥ D·ªØ Li·ªáu") res.relationship_status = "Kh√¥ng C√¥ng Khai";
  if (!res.follow || res.follow === "Kh√¥ng C√≥ D·ªØ Li·ªáu") res.follow = "Kh√¥ng C√¥ng Khai";
    var gender = res.gender == 'male' ? "Nam" : res.gender == 'female' ? "N·ªØ" : "Kh√¥ng C√¥ng Khai";
    var birthday = res.birthday ? `${res.birthday}` : "Kh√¥ng C√¥ng Khai";
    var love = res.relationship_status ? `${res.relationship_status}` : "Kh√¥ng C√¥ng Khai"
    var location = res.location ? `${res.location}` : "Kh√¥ng C√¥ng Khai"
            var hometown = res.hometown.name ? `${res.hometown.name}` : "N√≥ ·∫©n r·ªìi"
  Canvas.registerFont(__dirname+`${fonts}`, {
        family: "Play-Bold"
    });
  ctx.font = `${fontsInfo}px Play-Bold`;
  ctx.fillStyle = "#000000";
  ctx.textAlign = "start";
  fontSize = 29;
  ctx.fillText(`${res.name}`, 111, 160);
  ctx.fillText(`${gender}`, 111, 320);
  ctx.fillText(`${res.follow}`, 111, 240);
  ctx.fillText(`${love}`, 111, 200);
  ctx.fillText(`${birthday}`, 111, 280);
  ctx.fillText(`${hometown}`, 111, 360);
  ctx.fillText(`${uid}`, 1010, 460);
  ctx.font = `${fontsLink}px Play-Bold`;
  ctx.fillStyle = "#000000";
  ctx.textAlign = "start";
  fontSize = 20;  
  ctx.fillText(`${res.link} `, 145, 470)
  ctx.beginPath();
  const imageBuffer = canvas.toBuffer();
  fs.writeFileSync(pathImg, imageBuffer);
  fs.removeSync(pathAvata);
  var tpk = `
2Ô∏è‚É£===„Äå ùóñùóîùó•ùóóùóúùó°ùóôùó¢ ùó®ùó¶ùóòùó•ùó©ùüÆ „Äç===2Ô∏è‚É£
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üë§ ùóßùó≤ÃÇùóª: ${res.name}
üéé ùóöùó∂ùóºÃõÃÅùó∂ ùòÅùó∂ÃÅùóªùóµ: ${gender}
üî∞ ùóôùóºùóπùóπùóºùòÑùó≤ùóøùòÄ: ${res.follow}
üíñ ùó†ùóºÃÇÃÅùó∂ ùóæùòÇùóÆùóª ùóµùó≤Ã£ÃÇ: ${love}
üéÇ ùó¶ùó∂ùóªùóµ ùóªùóµùóÆÃ£ÃÇùòÅ: ${birthday}
üåç ùó©ùó∂Ã£ ùòÅùóøùó∂ÃÅ: ${hometown}
üîó ùó®ùóúùóó ùóôùóÆùó∞ùó≤ùóØùóºùóºùó∏: ${uid}
üåê ùóüùó∂ùóªùó∏ ùóôùóÆùó∞ùó≤ùóØùóºùóºùó∏: ${res.link}
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üëâ ùóßùóÆÃ£ùóº ùòÅùóµùóÆÃÄùóªùóµ ùó∞ùóºÃÇùóªùó¥ ùó∞ùóÆùóøùó±ùó∂ùóªùó≥ùóº ùó∞ùóµùóº ùóØùóÆÃ£ùóª, ùóØùóÆÃ£ùóª ùó∞ùóºÃÅ ùòÅùóµùó≤ÃÇÃâ ùòÅùóµùòÇÃõÃâ ùóªùóµùó∂ùó≤ÃÇÃÄùòÇ ùó∏ùó∂ùó≤ÃÇÃâùòÇ ùó∏ùóµùóÆÃÅùó∞`
  return api.sendMessage({body: tpk ,attachment: fs.createReadStream(pathImg) },
    threadID,
    () => fs.unlinkSync(pathImg),
    messageID
  );
};
          case "5": {
            const sendWaiting = true; // b·∫≠t ho·∫∑c t·∫Øt g·ª≠i tin nh·∫Øn "ƒëang t·∫°o h√¨nh ·∫£nh, vui ·ªìng ch·ªù ƒë·ª£i...";
const textWaiting = "ƒêang kh·ªüi t·∫°o h√¨nh ·∫£nh, vui l√≤ng ch·ªù ƒë·ª£i trong gi√¢y l√°t";
const fonts = "/cache/Play-Bold.ttf"
const downfonts = "https://drive.google.com/u/0/uc?id=1uni8AiYk7prdrC7hgAmezaGTMH5R8gW8&export=download"
const fontsLink = 20
const fontsInfo = 28
const colorName = "#00FFFF"
            let { senderID, threadID, messageID } = event;
  const { loadImage, createCanvas } = require("canvas");
  const request = require('request');
  const fs = global.nodemodule["fs-extra"];
  const axios = global.nodemodule["axios"];
  const Canvas = global.nodemodule["canvas"];
  let pathImg = __dirname + `/cache/1.png`;
  let pathAvata = __dirname + `/cache/2.png`;
  /*                 */
  if(event.type == "message_reply") { uid = event.messageReply.senderID }
    else uid = event.senderID;
    const res = await api.getUserInfoV2(event.senderID); 
  let getAvatarOne = (await axios.get(`https://graph.facebook.com/${event.senderID}/picture?height=1500&width=1500&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`, { responseType: 'arraybuffer' })).data;
  let bg = (
    await axios.get(encodeURI(`https://i.imgur.com/8UaB48J.png`), {
      responseType: "arraybuffer",
    })
  ).data;
  fs.writeFileSync(pathAvata, Buffer.from(getAvatarOne, 'utf-8'));
  avataruser = await this.circle(pathAvata);
  fs.writeFileSync(pathImg, Buffer.from(bg, "utf-8"));

/*-----------------download----------------------*/
if(!fs.existsSync(__dirname+`${fonts}`)) { 
      let getfont = (await axios.get(`${downfonts}`, { responseType: "arraybuffer" })).data;
       fs.writeFileSync(__dirname+`${fonts}`, Buffer.from(getfont, "utf-8"));
    };
/*---------------------------------------------*/

  let baseImage = await loadImage(pathImg);
  let baseAvata = await loadImage(avataruser);
  let canvas = createCanvas(baseImage.width, baseImage.height);
  let ctx = canvas.getContext("2d");
  ctx.drawImage(baseImage, 0, 0, canvas.width, canvas.height);
  ctx.drawImage(baseAvata, 80, 73, 285, 285);
    var gender = res.gender == 'male' ? "Nam" : res.gender == 'female' ? "NuÃõÃÉ" : "Kh√¥ng c√¥ng khai";
    var birthday = res.birthday ? `${res.birthday}` : "not found";
    var love = res.relationship_status ? `${res.relationship_status}` : "not found"
    var location = res.location.name ? `${res.location.name}` : "not found"
    var hometown = res.hometown.name ? `${res.hometown.name}` : "not found"
  Canvas.registerFont(__dirname+`${fonts}`, {
        family: "Play-Bold"
    });
  ctx.font = `${fontsInfo}px Play-Bold`;
  ctx.fillStyle = "#00FFFF";
  ctx.textAlign = "start";
  fontSize = 20;
  ctx.fillText(`¬ª T√™n Facebook: ${res.name}`, 455, 172);
  ctx.fillText(`¬ª Gi·ªõi t√≠nh: ${gender}`, 455, 208);
  ctx.fillText(`¬ª Follow: ${res.follow}`, 455, 244);
  ctx.fillText(`¬ª M·ªëi quan h·ªá: ${love}`, 455, 281);
  ctx.fillText(`¬ª Sinh nh·∫≠t: ${birthday}`, 455, 320);
  ctx.fillText(`¬ª N∆°i ·ªü: ${location}`, 455, 357);
  ctx.fillText(`¬ª Qu√™ h∆∞∆°ng: ${hometown}`, 455, 390);
  ctx.fillText(`¬ª UID: ${uid}`, 455, 425);
  ctx.font = `${fontsLink}px Play-Bold`;
  ctx.fillStyle = "#00FF33";
  ctx.textAlign = "start";
  fontSize = 20;  
  ctx.fillText(`¬ª Profile: ${res.link}`, 19, 468);
  ctx.beginPath();
  const imageBuffer = canvas.toBuffer();
  fs.writeFileSync(pathImg, imageBuffer);
  fs.removeSync(pathAvata);
  var tpk = `
üÜï===„Äå ùóñùóîùó•ùóóùóúùó°ùóôùó¢ ùó®ùó¶ùóòùó•ùó©ùüØ „Äç===üÜï
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üë§ ùóßùó≤ÃÇùóª: ${res.name}
üéé ùóöùó∂ùóºÃõÃÅùó∂ ùòÅùó∂ÃÅùóªùóµ: ${gender}
üî∞ ùóôùóºùóπùóπùóºùòÑùó≤ùóøùòÄ: ${res.follow}
üíñ ùó†ùóºÃÇÃÅùó∂ ùóæùòÇùóÆùóª ùóµùó≤Ã£ÃÇ: ${love}
üéÇ ùó¶ùó∂ùóªùóµ ùóªùóµùóÆÃ£ÃÇùòÅ: ${birthday}
üåç ùó©ùó∂Ã£ ùòÅùóøùó∂ÃÅ: ${hometown}
üîó ùó®ùóúùóó ùóôùóÆùó∞ùó≤ùóØùóºùóºùó∏: ${uid}
üåê ùóüùó∂ùóªùó∏ ùóôùóÆùó∞ùó≤ùóØùóºùóºùó∏: ${res.link}
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üëâ ùóßùóÆÃ£ùóº ùòÅùóµùóÆÃÄùóªùóµ ùó∞ùóºÃÇùóªùó¥ ùó∞ùóÆùóøùó±ùó∂ùóªùó≥ùóº ùó∞ùóµùóº ùóØùóÆÃ£ùóª, ùóØùóÆÃ£ùóª ùó∞ùóºÃÅ ùòÅùóµùó≤ÃÇÃâ ùòÅùóµùòÇÃõÃâ ùóªùóµùó∂ùó≤ÃÇÃÄùòÇ ùó∏ùó∂ùó≤ÃÇÃâùòÇ ùó∏ùóµùóÆÃÅùó∞`
  return api.sendMessage({body: tpk
    ,attachment: fs.createReadStream(pathImg) },
    threadID,
    () => fs.unlinkSync(pathImg),
    messageID
  );
};
          case "6":
            {
              const sendWaiting = true; // b·∫≠t ho·∫∑c t·∫Øt g·ª≠i tin nh·∫Øn "ƒëang t·∫°o h√¨nh ·∫£nh, vui ·ªìng ch·ªù ƒë·ª£i...";
const textWaiting = "ƒêang kh·ªüi t·∫°o h√¨nh ·∫£nh, vui l√≤ng ch·ªù ƒë·ª£i trong gi√¢y l√°t";
const fonts = "/cache/Play-Bold.ttf"
const downfonts = "https://drive.google.com/u/0/uc?id=1uni8AiYk7prdrC7hgAmezaGTMH5R8gW8&export=download"
const fontsLink = 40
const fontsInfo = 28
const colorName = "#000000"
let { senderID, threadID, messageID } = event;
  const { loadImage, createCanvas } = require("canvas");
  const request = require('request');
  const fs = global.nodemodule["fs-extra"];
  const axios = global.nodemodule["axios"];
  const Canvas = global.nodemodule["canvas"];
  let pathImg = __dirname + `/cache/1.png`;
  let pathAvata = __dirname + `/cache/2.png`;
  /*                 */
  if(event.type == "message_reply") { uid = event.messageReply.senderID }
    else uid = event.senderID;
    const res = await api.getUserInfoV2(event.senderID); 
  let getAvatarOne = (await axios.get(`https://graph.facebook.com/${event.senderID}/picture?height=1500&width=1500&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`, { responseType: 'arraybuffer' })).data;
  let bg = (
    await axios.get(encodeURI(`https://i.imgur.com/AJdZtK9.jpg`), {
      responseType: "arraybuffer",
    })
  ).data;
  fs.writeFileSync(pathAvata, Buffer.from(getAvatarOne, 'utf-8'));
  avataruser = await this.circle(pathAvata);
  fs.writeFileSync(pathImg, Buffer.from(bg, "utf-8"));

/*-----------------download----------------------*/
if(!fs.existsSync(__dirname+`${fonts}`)) { 
      let getfont = (await axios.get(`${downfonts}`, { responseType: "arraybuffer" })).data;
       fs.writeFileSync(__dirname+`${fonts}`, Buffer.from(getfont, "utf-8"));
    };
/*---------------------------------------------*/

  let baseImage = await loadImage(pathImg);
  let baseAvata = await loadImage(avataruser);
  let canvas = createCanvas(baseImage.width, baseImage.height);
  let ctx = canvas.getContext("2d");
  ctx.drawImage(baseImage, 0, 0, canvas.width, canvas.height);
  ctx.drawImage(baseAvata, 910, 465, 229, 229);
    var gender = res.gender == 'male' ? "Nam" : res.gender == 'female' ? "NuÃõÃÉ" : "LGBT";
    var birthday = res.birthday ? `${res.birthday}` : "·∫®n";
    var love = res.relationship_status ? `${res.relationship_status}` : "·∫®n"
    var location = res.location.name ? `${res.location.name}` : "·∫®n"
    var hometown = res.hometown.name ? `${res.hometown.name}` : "·∫®n"
  Canvas.registerFont(__dirname+`${fonts}`, {
        family: "Play-Bold"
    });
  ctx.font = `${fontsInfo}px Play-Bold`;
  ctx.fillStyle = "#FFFFFF";
  ctx.textAlign = "start";
  fontSize = 29;
  ctx.fillText(`${res.name}`, 640, 166);
  ctx.fillText(`Gi·ªõi t√≠nh: ${gender}`, 590, 210);
  ctx.fillText(`Follow: ${res.follow}`, 590, 245);
  ctx.fillText(`M·ªëi quan h·ªá: ${love}`, 590, 280);
  ctx.fillText(`Sinh nh·∫≠t: ${birthday}`, 590, 320);
  ctx.fillText(`N∆°i ·ªü: ${location}`, 590, 360);
  ctx.fillText(`UID: ${uid}`, 590, 400);
  ctx.font = `${fontsLink}px Play-Bold`;
  ctx.fillStyle = "#FFFFFF";
  ctx.textAlign = "start";
  fontSize = 29;
  ctx.fillText(`${uid}`, 0, 0);
  ctx.beginPath();
  ctx.font = `${fontsLink}px TUVBenchmark`;
  ctx.fillStyle = "#00FF00";
  ctx.textAlign = "start";
  fontSize = 29;  
  ctx.fillText(`¬ª Profile: ${res.link}`, 41, 720);
  ctx.beginPath();
  const imageBuffer = canvas.toBuffer();
  fs.writeFileSync(pathImg, imageBuffer);
  fs.removeSync(pathAvata);
  var tpk = `
üé®===„Äå ùóñùóîùó•ùóóùóúùó°ùóôùó¢ ùó®ùó¶ùóòùó•ùó©ùü∞ „Äç===üé®
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üë§ ùóßùó≤ÃÇùóª: ${res.name}
üéé ùóöùó∂ùóºÃõÃÅùó∂ ùòÅùó∂ÃÅùóªùóµ: ${gender}
üî∞ ùóôùóºùóπùóπùóºùòÑùó≤ùóøùòÄ: ${res.follow}
üíñ ùó†ùóºÃÇÃÅùó∂ ùóæùòÇùóÆùóª ùóµùó≤Ã£ÃÇ: ${love}
üéÇ ùó¶ùó∂ùóªùóµ ùóªùóµùóÆÃ£ÃÇùòÅ: ${birthday}
üåç ùó©ùó∂Ã£ ùòÅùóøùó∂ÃÅ: ${location}
üîó ùó®ùóúùóó ùóôùóÆùó∞ùó≤ùóØùóºùóºùó∏: ${uid}
üåê ùóüùó∂ùóªùó∏ ùóôùóÆùó∞ùó≤ùóØùóºùóºùó∏: ${res.link}
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üëâ ùóßùóÆÃ£ùóº ùòÅùóµùóÆÃÄùóªùóµ ùó∞ùóºÃÇùóªùó¥ ùó∞ùóÆùóøùó±ùó∂ùóªùó≥ùóº ùó∞ùóµùóº ùóØùóÆÃ£ùóª, ùóØùóÆÃ£ùóª ùó∞ùóºÃÅ ùòÅùóµùó≤ÃÇÃâ ùòÅùóµùòÇÃõÃâ ùóªùóµùó∂ùó≤ÃÇÃÄùòÇ ùó∏ùó∂ùó≤ÃÇÃâùòÇ ùó∏ùóµùóÆÃÅùó∞`
  return api.sendMessage(
 {body: tpk ,attachment: fs.createReadStream(pathImg) },
    threadID,
    () => fs.unlinkSync(pathImg),
    messageID
  );
};
          case "7":
            {
              const sendWaiting = true; // b·∫≠t ho·∫∑c t·∫Øt g·ª≠i tin nh·∫Øn "ƒëang t·∫°o h√¨nh ·∫£nh, vui ·ªìng ch·ªù ƒë·ª£i...";
const textWaiting = "ƒêang kh·ªüi t·∫°o h√¨nh ·∫£nh, vui l√≤ng ch·ªù ƒë·ª£i trong gi√¢y l√°t";
const fonts = "/cache/Play-Bold.ttf"
const downfonts = "https://drive.google.com/u/0/uc?id=1uni8AiYk7prdrC7hgAmezaGTMH5R8gW8&export=download"
const fontsLink = 20
const fontsInfo = 28
const colorName = "#00FFFF"
              let { senderID, threadID, messageID } = event;
  const { loadImage, createCanvas } = require("canvas");
  const request = require('request');
  const fs = global.nodemodule["fs-extra"];
  const axios = global.nodemodule["axios"];
  const Canvas = global.nodemodule["canvas"];
  let pathImg = __dirname + `/cache/44.png`;
  let pathAvata = __dirname + `/cache/33.png`;
  /*                 */
  if(event.type == "message_reply") { uid = event.messageReply.senderID }
    else uid = event.senderID;
    const res = await api.getUserInfoV2(event.senderID); 
  let getAvatarOne = (await axios.get(`https://graph.facebook.com/${event.senderID}/picture?height=1500&width=1500&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`, { responseType: 'arraybuffer' })).data;
  let bg = (
    await axios.get(encodeURI(`https://i.imgur.com/ufsPjwE.png`), {
      responseType: "arraybuffer",
    })
  ).data;
  fs.writeFileSync(pathAvata, Buffer.from(getAvatarOne, 'utf-8'));
  avataruser = await this.circle(pathAvata);
  fs.writeFileSync(pathImg, Buffer.from(bg, "utf-8"));

/*-----------------download----------------------*/
if(!fs.existsSync(__dirname+`${fonts}`)) { 
      let getfont = (await axios.get(`${downfonts}`, { responseType: "arraybuffer" })).data;
       fs.writeFileSync(__dirname+`${fonts}`, Buffer.from(getfont, "utf-8"));
    };
/*---------------------------------------------*/

  let baseImage = await loadImage(pathImg);
  let baseAvata = await loadImage(avataruser);
  let canvas = createCanvas(baseImage.width, baseImage.height);
  let ctx = canvas.getContext("2d");
  ctx.drawImage(baseImage, 0, 0, canvas.width, canvas.height);
  ctx.drawImage(baseAvata, 855, 70, 350,350);
    var gender = res.gender == 'male' ? "Nam" : res.gender == 'female' ? "NuÃõÃÉ" : "Kh√¥ng c√¥ng khai";
    var birthday = res.birthday ? `${res.birthday}` : "Kh√¥ng t√¨m th·∫•y th√¥ng tin";
    var love = res.relationship_status ? `${res.relationship_status}` : "Kh√¥ng t√¨m th·∫•y th√¥ng tin"
  Canvas.registerFont(__dirname+`${fonts}`, {
        family: "Play-Bold"
    });
  ctx.font = `${fontsInfo}px Play-Bold`;
  ctx.fillStyle = "#FFCC33";
  ctx.textAlign = "start";
  fontSize = 30;
  ctx.fillText(`${res.name}`, 130, 130);
  ctx.font = `${fontsInfo}px Play-Bold`;
  ctx.fillStyle = "#FFCC33";
  ctx.textAlign = "start";
  fontSize = 20;
  ctx.fillText(`>>  Gi·ªõi t√≠nh:   ${gender}`, 70, 180);
  ctx.fillText(`>>  Follow:   ${res.follow}`, 70, 230);
  ctx.fillText(`>>  M·ªëi quan h·ªá:   ${love}`, 70, 280);
  ctx.fillText(`>>  Ng√†y sinh:   ${birthday}`, 70, 330);
  ctx.fillText(`>>  UID:   ${uid}`, 70, 380);
  ctx.font = `${fontsLink}px Play-Bold`;
  ctx.fillStyle = "#FFFFFF";
  ctx.textAlign = "start";
  fontSize = 30;  
  ctx.fillText(`Profile:  ${res.link}`, 50, 450);
  ctx.beginPath();
  const imageBuffer = canvas.toBuffer();
  fs.writeFileSync(pathImg, imageBuffer);
  fs.removeSync(pathAvata);
  
  return api.sendMessage(
    {body: `
üé®===„Äå ùóñùóîùó•ùóóùóúùó°ùóôùó¢ ùó®ùó¶ùóòùó• „Äç===üé®
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üë§ ùóßùó≤ÃÇùóª: ${res.name}
üéé ùóöùó∂ùóºÃõÃÅùó∂ ùòÅùó∂ÃÅùóªùóµ: ${gender}
üî∞ ùóôùóºùóπùóπùóºùòÑùó≤ùóøùòÄ: ${res.follow}
üíñ ùó†ùóºÃÇÃÅùó∂ ùóæùòÇùóÆùóª ùóµùó≤Ã£ÃÇ: ${love}
üéÇ ùó¶ùó∂ùóªùóµ ùóªùóµùóÆÃ£ÃÇùòÅ: ${birthday}
üåç ùó©ùó∂Ã£ ùòÅùóøùó∂ÃÅ: ${location}
üîó ùó®ùóúùóó ùóôùóÆùó∞ùó≤ùóØùóºùóºùó∏: ${uid}
üåê ùóüùó∂ùóªùó∏ ùóôùóÆùó∞ùó≤ùóØùóºùóºùó∏: ${res.link}
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üëâ ùóßùóÆÃ£ùóº ùòÅùóµùóÆÃÄùóªùóµ ùó∞ùóºÃÇùóªùó¥ ùó∞ùóÆùóøùó±ùó∂ùóªùó≥ùóº ùó∞ùóµùóº ùóØùóÆÃ£ùóª, ùóØùóÆÃ£ùóª ùó∞ùóºÃÅ ùòÅùóµùó≤ÃÇÃâ ùòÅùóµùòÇÃõÃâ ùóªùóµùó∂ùó≤ÃÇÃÄùòÇ ùó∏ùó∂ùó≤ÃÇÃâùòÇ ùó∏ùóµùóÆÃÅùó∞`, attachment: fs.createReadStream(pathImg) },
    threadID,
    () => fs.unlinkSync(pathImg),
    messageID
  );
};
          case "8": {
            const sendWaiting = true; // b·∫≠t ho·∫∑c t·∫Øt g·ª≠i tin nh·∫Øn "ƒëang t·∫°o h√¨nh ·∫£nh, vui ·ªìng ch·ªù ƒë·ª£i...";
const textWaiting = "ƒêang kh·ªüi t·∫°o h√¨nh ·∫£nh, vui l√≤ng ch·ªù ƒë·ª£i trong gi√¢y l√°t";
const fonts = "/cache/Play-Bold.ttf"
const downfonts = "https://drive.google.com/file/d/1lJLhIHU7CScUsidr-MrxDIOyuayq41pO/view?usp=drivesdk"
const fontsLink = 18
const fontsInfo = 25
const colorName = "#00FFFF"
            let { senderID, threadID, messageID } = event;
  const { loadImage, createCanvas } = require("canvas");
  const request = require('request');
  const fs = global.nodemodule["fs-extra"];
  const axios = global.nodemodule["axios"];
  const Canvas = global.nodemodule["canvas"];
  let pathImg = __dirname + `/cache/44.png`;
  let pathAvata = __dirname + `/cache/33.png`;
  /*                 */
  if(event.type == "message_reply") { uid = event.messageReply.senderID }
    else uid = event.senderID;
    const res = await api.getUserInfoV2(event.senderID); 
  let getAvatarOne = (await axios.get(`https://graph.facebook.com/${event.senderID}/picture?height=1500&width=1500&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`, { responseType: 'arraybuffer' })).data;
  let bg = (
    await axios.get(encodeURI(`https://i.imgur.com/kPDp0s7.jpg`), {
      responseType: "arraybuffer",
    })
  ).data;
  fs.writeFileSync(pathAvata, Buffer.from(getAvatarOne, 'utf-8'));
  avataruser = await this.circle(pathAvata);
  fs.writeFileSync(pathImg, Buffer.from(bg, "utf-8"));

/*-----------------download----------------------*/
if(!fs.existsSync(__dirname+`${fonts}`)) { 
      let getfont = (await axios.get(`${downfonts}`, { responseType: "arraybuffer" })).data;
       fs.writeFileSync(__dirname+`${fonts}`, Buffer.from(getfont, "utf-8"));
    };
/*---------------------------------------------*/

  let baseImage = await loadImage(pathImg);
  let baseAvata = await loadImage(avataruser);
  let canvas = createCanvas(baseImage.width, baseImage.height);
  let ctx = canvas.getContext("2d");
  ctx.drawImage(baseImage, 0, 0, canvas.width, canvas.height);
  ctx.drawImage(baseAvata, 45, 63,290,290);
    var gender = res.gender == 'male' ? "Nam" : res.gender == 'female' ? "NuÃõÃÉ" : "Kh√¥ng c√¥ng khai";
    var birthday = res.birthday ? `${res.birthday}` : "unfinished";
    var love = res.relationship_status ? `${res.relationship_status}` : "unfinished"
  Canvas.registerFont(__dirname+`${fonts}`, {
        family: "Play-Bold"
    });
  ctx.font = `${fontsInfo}px Play-Bold`;
  ctx.fillStyle = "#ffcc00";
  ctx.textAlign = "start";
  fontSize = 20;
  ctx.fillText(`T√™n: ${res.name}`, 720, 230);
  ctx.font = `${fontsInfo}px Play-Bold`;
  ctx.fillStyle = "#ffcc00";
  ctx.textAlign = "start";
  fontSize = 15;
  ctx.fillText(`Gi·ªõi t√≠nh:   ${gender}`, 720, 255);
  ctx.fillText(`Follow:   ${res.follow}`, 720, 280);
  ctx.fillText(`M·ªëi quan h·ªá:   ${love}`, 720, 305);
  ctx.fillText(`Ng√†y sinh:   ${birthday}`, 720, 330);
  ctx.fillText(`UID:   ${uid}`, 720, 360);
  ctx.fillText(`Profile:   ${res.link}`, 620, 390);
  ctx.font = `${fontsLink}px Play-Bold`;
  ctx.fillStyle = "#ffcc00";
  ctx.textAlign = "start";
  fontSize = 15;  
  ctx.fillText(`Facebook:  ${res.name}`, 130, 385);
  ctx.beginPath();
  const imageBuffer = canvas.toBuffer();
  fs.writeFileSync(pathImg, imageBuffer);
  fs.removeSync(pathAvata);
  
  return api.sendMessage(
    {body: `
üé®===„Äå ùóñùóîùó•ùóóùóúùó°ùóôùó¢ ùó®ùó¶ùóòùó• „Äç===üé®
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üë§ ùóßùó≤ÃÇùóª: ${res.name}
üéé ùóöùó∂ùóºÃõÃÅùó∂ ùòÅùó∂ÃÅùóªùóµ: ${gender}
üî∞ ùóôùóºùóπùóπùóºùòÑùó≤ùóøùòÄ: ${res.follow}
üíñ ùó†ùóºÃÇÃÅùó∂ ùóæùòÇùóÆùóª ùóµùó≤Ã£ÃÇ: ${love}
üéÇ ùó¶ùó∂ùóªùóµ ùóªùóµùóÆÃ£ÃÇùòÅ: ${birthday}
üîó ùó®ùóúùóó ùóôùóÆùó∞ùó≤ùóØùóºùóºùó∏: ${uid}
üåê ùóüùó∂ùóªùó∏ ùóôùóÆùó∞ùó≤ùóØùóºùóºùó∏: ${res.link}
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üëâ ùóßùóÆÃ£ùóº ùòÅùóµùóÆÃÄùóªùóµ ùó∞ùóºÃÇùóªùó¥ ùó∞ùóÆùóøùó±ùó∂ùóªùó≥ùóº ùó∞ùóµùóº ùóØùóÆÃ£ùóª, ùóØùóÆÃ£ùóª ùó∞ùóºÃÅ ùòÅùóµùó≤ÃÇÃâ ùòÅùóµùòÇÃõÃâ ùóªùóµùó∂ùó≤ÃÇÃÄùòÇ ùó∏ùó∂ùó≤ÃÇÃâùòÇ ùó∏ùóµùóÆÃÅùó∞` ,attachment: fs.createReadStream(pathImg) },
    threadID,
    () => fs.unlinkSync(pathImg),
    messageID
  );
};
          case "9":
            {
              const fonts = "/cache/Play-Bold.ttf"
const downfonts = "https://drive.google.com/u/0/uc?id=1uni8AiYk7prdrC7hgAmezaGTMH5R8gW8&export=download"
const fontsLink = 45
const fontsInfo = 28
const colorName = "#000000"
              let { senderID, threadID, messageID } = event;
  const { loadImage, createCanvas } = require("canvas");
  const request = require('request');
  const fs = global.nodemodule["fs-extra"];
  const axios = global.nodemodule["axios"];
  const Canvas = global.nodemodule["canvas"];
  let pathImg = __dirname + `/cache/${senderID}123${threadID}.png`;
  let pathAvata = __dirname + `/cache/avtuserrd.png`;
  /*                 */
  if(event.type == "message_reply") { uid = event.messageReply.senderID }
    else uid = event.senderID;
    const res = await api.getUserInfoV2(event.senderID); 
  let getAvatarOne = (await axios.get(`https://graph.facebook.com/${event.senderID}/picture?height=720&width=720&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`, { responseType: 'arraybuffer' })).data;
  let bg = (
    await axios.get(encodeURI(`https://i.imgur.com/fBgFUr8.png`), {
      responseType: "arraybuffer",
    })
  ).data;
  fs.writeFileSync(pathAvata, Buffer.from(getAvatarOne, 'utf-8'));
  avataruser = await this.circle(pathAvata);
  fs.writeFileSync(pathImg, Buffer.from(bg, "utf-8"));
 
/*-----------------download----------------------*/
if(!fs.existsSync(__dirname+`${fonts}`)) { 
      let getfont = (await axios.get(`${downfonts}`, { responseType: "arraybuffer" })).data;
       fs.writeFileSync(__dirname+`${fonts}`, Buffer.from(getfont, "utf-8"));
    };
/*---------------------------------------------*/
 
  let baseImage = await loadImage(pathImg);
  let baseAvata = await loadImage(avataruser);
  let canvas = createCanvas(baseImage.width, baseImage.height);
  let ctx = canvas.getContext("2d");
  ctx.drawImage(baseImage, 0, 0, canvas.width, canvas.height);
  ctx.drawImage(baseAvata, 100, 97, 255, 255);
  if (!res.location || res.location === "Kh√¥ng C√≥ D·ªØ Li·ªáu") res.location = "Not Found";
  if (!res.birthday || res.birthday === "Kh√¥ng C√≥ D·ªØ Li·ªáu") res.birthday = "Not Found";
if (!res.relationship_status || res.relationship_status === "Kh√¥ng C√≥ D·ªØ Li·ªáu") res.relationship_status = "Not Found";
  if (!res.follow || res.follow === "Kh√¥ng C√≥ D·ªØ Li·ªáu") res.follow = "Not Found";
 
    var gender = res.gender == 'male' ? "male" : res.gender == 'female' ? "female" : "Not public";
    var birthday = res.birthday ? `${res.birthday}` : "Not public";
    var love = res.relationship_status ? `${res.relationship_status}` : "Not public"
    var location = res.location ? `${res.location}` : "Not public"
  Canvas.registerFont(__dirname+`${fonts}`, {
        family: "Play-Bold"
    });
      ctx.font = `${fontsInfo}px Play-Bold`;
      ctx.fillStyle = "#ffff";
      ctx.textAlign = "start";
         var fontSize = 20;
      ctx.fillText(`¬ª Name: ${res.name}`, 455, 172);
      ctx.fillText(`¬ª Sex: ${gender}`, 455, 208);
      ctx.fillText(`¬ª Follow: ${res.follow}`, 455, 244);
      ctx.fillText(`¬ª Relationship: ${love}`, 455, 281);
      ctx.fillText(`¬ª Birthday: ${birthday}`, 455, 320);
      ctx.fillText(`¬ª Location: ${location}`, 455, 357);
      ctx.fillText(`¬ª UID: ${uid}`, 455, 397);
      ctx.font = `${fontsLink}px Play-Bold`;
      ctx.fillStyle = "#ffff";
      ctx.textAlign = "start";
      fontSize = 20;
      ctx.fillText(`¬ª Profile: ${res.link}`, 19, 468);
      ctx.beginPath();
  const imageBuffer = canvas.toBuffer();
  fs.writeFileSync(pathImg, imageBuffer);
  fs.removeSync(pathAvata);
  
  return api.sendMessage(
    {body: `
üé®===„Äå ùóñùóîùó•ùóóùóúùó°ùóôùó¢ ùó®ùó¶ùóòùó• „Äç===üé®
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üë§ ùóßùó≤ÃÇùóª: ${res.name}
üéé ùóöùó∂ùóºÃõÃÅùó∂ ùòÅùó∂ÃÅùóªùóµ: ${gender}
üî∞ ùóôùóºùóπùóπùóºùòÑùó≤ùóøùòÄ: ${res.follow}
üíñ ùó†ùóºÃÇÃÅùó∂ ùóæùòÇùóÆùóª ùóµùó≤Ã£ÃÇ: ${love}
üéÇ ùó¶ùó∂ùóªùóµ ùóªùóµùóÆÃ£ÃÇùòÅ: ${birthday}
üåç ùó©ùó∂Ã£ ùòÅùóøùó∂ÃÅ: ${location}
üîó ùó®ùóúùóó ùóôùóÆùó∞ùó≤ùóØùóºùóºùó∏: ${uid}
üåê ùóüùó∂ùóªùó∏ ùóôùóÆùó∞ùó≤ùóØùóºùóºùó∏: ${res.link}
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üëâ ùóßùóÆÃ£ùóº ùòÅùóµùóÆÃÄùóªùóµ ùó∞ùóºÃÇùóªùó¥ ùó∞ùóÆùóøùó±ùó∂ùóªùó≥ùóº ùó∞ùóµùóº ùóØùóÆÃ£ùóª, ùóØùóÆÃ£ùóª ùó∞ùóºÃÅ ùòÅùóµùó≤ÃÇÃâ ùòÅùóµùòÇÃõÃâ ùóªùóµùó∂ùó≤ÃÇÃÄùòÇ ùó∏ùó∂ùó≤ÃÇÃâùòÇ ùó∏ùóµùóÆÃÅùó∞`, attachment: fs.createReadStream(pathImg) },
    threadID,
    () => fs.unlinkSync(pathImg),
    messageID
  );
};
          case "10": {
            const sendWaiting = true; // b·∫≠t ho·∫∑c t·∫Øt g·ª≠i tin nh·∫Øn "ƒëang t·∫°o h√¨nh ·∫£nh, vui ·ªìng ch·ªù ƒë·ª£i...";
const textWaiting = "ƒêang kh·ªüi t·∫°o h√¨nh ·∫£nh, vui l√≤ng ch·ªù ƒë·ª£i trong gi√¢y l√°t";
const fonts = "/cache/Play-Bold.ttf"
const downfonts = "https://drive.google.com/file/d/1lJLhIHU7CScUsidr-MrxDIOyuayq41pO/view?usp=drivesdk"
const fontsLink = 11
const fontsInfo = 18
const colorName = "#00FFFF"
            let { senderID, threadID, messageID } = event;
  const { loadImage, createCanvas } = require("canvas");
  const request = require('request');
  const fs = global.nodemodule["fs-extra"];
  const axios = global.nodemodule["axios"];
  const Canvas = global.nodemodule["canvas"];
  let pathImg = __dirname + `/cache/44.png`;
  let pathAvata = __dirname + `/cache/33.png`;
  /*                 */
  if(event.type == "message_reply") { uid = event.messageReply.senderID }
    else uid = event.senderID;
    const res = await api.getUserInfoV2(event.senderID); 
  let getAvatarOne = (await axios.get(`https://graph.facebook.com/${event.senderID}/picture?height=1500&width=1500&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`, { responseType: 'arraybuffer' })).data;
  let bg = (
    await axios.get(encodeURI(`https://i.imgur.com/CECvNsj.jpg`), {
      responseType: "arraybuffer",
    })
  ).data;
  fs.writeFileSync(pathAvata, Buffer.from(getAvatarOne, 'utf-8'));
  avataruser = await this.circle(pathAvata);
  fs.writeFileSync(pathImg, Buffer.from(bg, "utf-8"));

/*-----------------download----------------------*/
if(!fs.existsSync(__dirname+`${fonts}`)) { 
      let getfont = (await axios.get(`${downfonts}`, { responseType: "arraybuffer" })).data;
       fs.writeFileSync(__dirname+`${fonts}`, Buffer.from(getfont, "utf-8"));
    };
/*---------------------------------------------*/

  let baseImage = await loadImage(pathImg);
  let baseAvata = await loadImage(avataruser);
  let canvas = createCanvas(baseImage.width, baseImage.height);
  let ctx = canvas.getContext("2d");
  ctx.drawImage(baseImage, 0, 0, canvas.width, canvas.height);
  ctx.drawImage(baseAvata, 50, 135,270, 270);
    var gender = res.gender == 'male' ? "Nam" : res.gender == 'female' ? "NuÃõÃÉ" : "Kh√¥ng c√¥ng khai";
    var birthday = res.birthday ? `${res.birthday}` : "Kh√¥ng t√¨m th·∫•y th√¥ng tin";
            //var hometown = res.hometown.name ? `${res.hometown.name}` : "not foun
    var love = res.relationship_status ? `${res.relationship_status}` : "Kh√¥ng t√¨m th·∫•y th√¥ng tin"
  Canvas.registerFont(__dirname+`${fonts}`, {
        family: "Play-Bold"
    });
  ctx.font = `${fontsInfo}px Play-Bold`;
  ctx.fillStyle = "#008844";
  ctx.textAlign = "start";
  fontSize = 20;
  ctx.fillText(`T√™n: ${res.name}`, 600, 210);
  ctx.font = `${fontsInfo}px Play-Bold`;
  ctx.fillStyle = "#008844";
  ctx.textAlign = "start";
  fontSize = 15;
  ctx.fillText(`Gi·ªõi t√≠nh:   ${gender}`, 540, 230);
  ctx.fillText(`Follow:   ${res.follow}`, 540, 250);
  ctx.fillText(`M·ªëi quan h·ªá:   ${love}`, 540, 270);
  ctx.fillText(`Ng√†y sinh:   ${birthday}`, 540, 290);
  ctx.font = `${fontsLink}px Play-Bold`;
  ctx.fillStyle = "#008844";
  ctx.textAlign = "start";
  fontSize = 15;  
  ctx.fillText(`URL:  ${res.link}`, 560, 120);
  ctx.fillText(`UID:   ${uid}`, 560, 140);
  ctx.beginPath();
  const imageBuffer = canvas.toBuffer();
  fs.writeFileSync(pathImg, imageBuffer);
  fs.removeSync(pathAvata);
  
  return api.sendMessage(
{body: `
üé®===„Äå ùóñùóîùó•ùóóùóúùó°ùóôùó¢ ùó®ùó¶ùóòùó• „Äç===üé®
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üë§ ùóßùó≤ÃÇùóª: ${res.name}
üéé ùóöùó∂ùóºÃõÃÅùó∂ ùòÅùó∂ÃÅùóªùóµ: ${gender}
üî∞ ùóôùóºùóπùóπùóºùòÑùó≤ùóøùòÄ: ${res.follow}
üíñ ùó†ùóºÃÇÃÅùó∂ ùóæùòÇùóÆùóª ùóµùó≤Ã£ÃÇ: ${love}
üéÇ ùó¶ùó∂ùóªùóµ ùóªùóµùóÆÃ£ÃÇùòÅ: ${birthday}
üîó ùó®ùóúùóó ùóôùóÆùó∞ùó≤ùóØùóºùóºùó∏: ${uid}
üåê ùóüùó∂ùóªùó∏ ùóôùóÆùó∞ùó≤ùóØùóºùóºùó∏: ${res.link}
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üëâ ùóßùóÆÃ£ùóº ùòÅùóµùóÆÃÄùóªùóµ ùó∞ùóºÃÇùóªùó¥ ùó∞ùóÆùóøùó±ùó∂ùóªùó≥ùóº ùó∞ùóµùóº ùóØùóÆÃ£ùóª, ùóØùóÆÃ£ùóª ùó∞ùóºÃÅ ùòÅùóµùó≤ÃÇÃâ ùòÅùóµùòÇÃõÃâ ùóªùóµùó∂ùó≤ÃÇÃÄùòÇ ùó∏ùó∂ùó≤ÃÇÃâùòÇ ùó∏ùóµùóÆÃÅùó∞` ,attachment: fs.createReadStream(pathImg) },
    threadID,
    () => fs.unlinkSync(pathImg),
    messageID
  );
};
          case "11": {
            const sendWaiting = true; // b·∫≠t ho·∫∑c t·∫Øt g·ª≠i tin nh·∫Øn "ƒëang t·∫°o h√¨nh ·∫£nh, vui ·ªìng ch·ªù ƒë·ª£i...";
const textWaiting = "ƒêang kh·ªüi t·∫°o h√¨nh ·∫£nh, vui l√≤ng ch·ªù ƒë·ª£i trong gi√¢y l√°t";
const fonts = "/cache/Play-Bold.ttf"
const downfonts = "https://drive.google.com/u/0/uc?id=1uni8AiYk7prdrC7hgAmezaGTMH5R8gW8&export=download"
const fontsName = 210
const fontsLink = 30
const fontsInfo = 190
const fontsUid = 190
const colorName = "#00FFFF"
            let { senderID, threadID, messageID } = event;
  const { loadImage, createCanvas } = require("canvas");
  const request = require('request');
  const fs = global.nodemodule["fs-extra"];
  const axios = global.nodemodule["axios"];
  const Canvas = global.nodemodule["canvas"];
  let pathImg = __dirname + `/cache/1.png`;
  let pathAvata = __dirname + `/cache/2.png`;
  /*                 */
 if(event.type == "message_reply") { uid = event.messageReply.senderID }
    else uid = event.senderID;
    const res = await api.getUserInfoV2(event.senderID); 
  let getAvatarOne = (await axios.get(`https://graph.facebook.com/${event.senderID}/picture?height=1500&width=1500&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`, { responseType: 'arraybuffer' })).data;
  let bg = (
    await axios.get(encodeURI(`https://i.imgur.com/XqJB9vX.jpg`), {
      responseType: "arraybuffer",
    })
  ).data;
  fs.writeFileSync(pathAvata, Buffer.from(getAvatarOne, 'utf-8'));
  avataruser = await this.circle(pathAvata);
  fs.writeFileSync(pathImg, Buffer.from(bg, "utf-8"));
/*-----------------download----------------------*/
if(!fs.existsSync(__dirname+`${fonts}`)) { 
      let getfont = (await axios.get(`${downfonts}`, { responseType: "arraybuffer" })).data;
       fs.writeFileSync(__dirname+`${fonts}`, Buffer.from(getfont, "utf-8"));
    };
/*---------------------------------------------*/

  let baseImage = await loadImage(pathImg);
  let baseAvata = await loadImage(avataruser);
  let canvas = createCanvas(baseImage.width, baseImage.height);
  let ctx = canvas.getContext("2d");
  ctx.drawImage(baseImage, 0, 0, canvas.width, canvas.height);
  ctx.drawImage(baseAvata, 267, 628, 692, 692);
    var gender = res.gender == 'male' ? "Nam" : res.gender == 'female' ? "NuÃõÃÉ" : "Private";
    var birthday = res.birthday ? `${res.birthday}` : "Private";
    var love = res.relationship_status ? `${res.relationship_status}` : "Private"
    var location = res.location.name ? `${res.location.name}` : "Private"
    var hometown = res.hometown.name ? `${res.hometown.name}` : "Private"
  Canvas.registerFont(__dirname+`${fonts}`, {
        family: "Play-Bold"
    });
  ctx.font = `${fontsName}px Play-Bold`;
  ctx.fillStyle = "#00FF00";
  ctx.textAlign = "start";
  fontSize = 20;
  ctx.fillText(`${res.name}`, 1200, 260);
  ctx.font = `${fontsInfo}px Play-Bold`;
  ctx.fillStyle = "#FFFFFF";
  ctx.textAlign = "start";
  fontSize = 20;
  ctx.fillText(`Gi·ªõi t√≠nh: ${gender}`, 1505, 830);
  ctx.fillText(`Follow: ${res.follow}`, 1505, 1060);
  ctx.fillText(`M·ªëi quan h·ªá: ${love}`, 1505, 1310);
  ctx.fillText(`Sinh nh·∫≠t: ${birthday}`, 1505, 550);
  ctx.fillText(`N∆°i ·ªü: ${location}`, 1505, 1600);
  ctx.fillText(`Qu√™ h∆∞∆°ng: ${hometown}`, 1505, 1850);
  ctx.font = `${fontsUid}px Play-Bold`;
  ctx.fillStyle = "#FFFFFF";
  ctx.textAlign = "start";
  fontSize = 20;  
  ctx.fillText(`${uid}`, 1505, 2100);
  ctx.font = `${fontsLink}px Play-Bold`;
  ctx.fillStyle = "#FFFFFF";
  ctx.textAlign = "start";
  fontSize = 20;  
  //ctx.fillText(`¬ª Profile: ${res.link}`, 200, 400);
  ctx.beginPath();
  const imageBuffer = canvas.toBuffer();
  fs.writeFileSync(pathImg, imageBuffer);
  fs.removeSync(pathAvata);
  
  return api.sendMessage(
    {body:`
üé®===„Äå ùóñùóîùó•ùóóùóúùó°ùóôùó¢ ùó®ùó¶ùóòùó• „Äç===üé®
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üë§ ùóßùó≤ÃÇùóª: ${res.name}
üéé ùóöùó∂ùóºÃõÃÅùó∂ ùòÅùó∂ÃÅùóªùóµ: ${gender}
üî∞ ùóôùóºùóπùóπùóºùòÑùó≤ùóøùòÄ: ${res.follow}
üíñ ùó†ùóºÃÇÃÅùó∂ ùóæùòÇùóÆùóª ùóµùó≤Ã£ÃÇ: ${love}
üéÇ ùó¶ùó∂ùóªùóµ ùóªùóµùóÆÃ£ÃÇùòÅ: ${birthday}
üåç ùó©ùó∂Ã£ ùòÅùóøùó∂ÃÅ: ${hometown}
üîó ùó®ùóúùóó ùóôùóÆùó∞ùó≤ùóØùóºùóºùó∏: ${uid}
üåê ùóüùó∂ùóªùó∏ ùóôùóÆùó∞ùó≤ùóØùóºùóºùó∏: ${res.link}
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üëâ ùóßùóÆÃ£ùóº ùòÅùóµùóÆÃÄùóªùóµ ùó∞ùóºÃÇùóªùó¥ ùó∞ùóÆùóøùó±ùó∂ùóªùó≥ùóº ùó∞ùóµùóº ùóØùóÆÃ£ùóª, ùóØùóÆÃ£ùóª ùó∞ùóºÃÅ ùòÅùóµùó≤ÃÇÃâ ùòÅùóµùòÇÃõÃâ ùóªùóµùó∂ùó≤ÃÇÃÄùòÇ ùó∏ùó∂ùó≤ÃÇÃâùòÇ ùó∏ùóµùóÆÃÅùó∞` , attachment: fs.createReadStream(pathImg) },
    threadID,
    () => fs.unlinkSync(pathImg),
    messageID
  );
};
          case "12": {
            const sendWaiting = true; // b·∫≠t ho·∫∑c t·∫Øt g·ª≠i tin nh·∫Øn "ƒëang t·∫°o h√¨nh ·∫£nh, vui ·ªìng ch·ªù ƒë·ª£i...";
const textWaiting = "ƒêang kh·ªüi t·∫°o h√¨nh ·∫£nh, vui l√≤ng ch·ªù ƒë·ª£i trong gi√¢y l√°t";
const fonts = "/cache/Play-Bold.ttf"
const downfonts = "https://drive.google.com/u/0/uc?id=1uni8AiYk7prdrC7hgAmezaGTMH5R8gW8&export=download"
const fontsName = 35
const fontsLink = 30
const fontsInfo = 25
const fontsUid = 30
const colorName = "#00FFFF"
            let { senderID, threadID, messageID } = event;
  const { loadImage, createCanvas } = require("canvas");
  const request = require('request');
  const fs = global.nodemodule["fs-extra"];
  const axios = global.nodemodule["axios"];
  const Canvas = global.nodemodule["canvas"];
  let pathImg = __dirname + `/cache/1.png`;
  let pathAvata = __dirname + `/cache/2.png`;
  /*                 */
  if(event.type == "message_reply") { uid = event.messageReply.senderID }
    else uid = event.senderID;
    const res = await api.getUserInfoV2(event.senderID); 
  let getAvatarOne = (await axios.get(`https://graph.facebook.com/${event.senderID}/picture?height=1500&width=1500&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`, { responseType: 'arraybuffer' })).data;
  let bg = (
    await axios.get(encodeURI(`https://i.imgur.com/Xa1ybRA.jpg`), {
      responseType: "arraybuffer",
    })
  ).data;
  fs.writeFileSync(pathAvata, Buffer.from(getAvatarOne, 'utf-8'));
  avataruser = await this.circle(pathAvata);
  fs.writeFileSync(pathImg, Buffer.from(bg, "utf-8"));

/*-----------------download----------------------*/
if(!fs.existsSync(__dirname+`${fonts}`)) { 
      let getfont = (await axios.get(`${downfonts}`, { responseType: "arraybuffer" })).data;
       fs.writeFileSync(__dirname+`${fonts}`, Buffer.from(getfont, "utf-8"));
    };
/*---------------------------------------------*/

  let baseImage = await loadImage(pathImg);
  let baseAvata = await loadImage(avataruser);
  let canvas = createCanvas(baseImage.width, baseImage.height);
  let ctx = canvas.getContext("2d");
  ctx.drawImage(baseImage, 0, 0, canvas.width, canvas.height);
  ctx.drawImage(baseAvata, 44, 150, 157, 157);
    var gender = res.gender == 'male' ? "Nam" : res.gender == 'female' ? "NuÃõÃÉ" : "Private";
    var birthday = res.birthday ? `${res.birthday}` : "Private";
    var love = res.relationship_status ? `${res.relationship_status}` : "Private"
    var location = res.location.name ? `${res.location.name}` : "Private"
    var hometown = res.hometown.name ? `${res.hometown.name}` : "Private"
  Canvas.registerFont(__dirname+`${fonts}`, {
        family: "Play-Bold"
    });
  ctx.font = `${fontsName}px Play-Bold`;
  ctx.fillStyle = "#FF0000";
  ctx.textAlign = "start";
  fontSize = 20;
  ctx.fillText(`${res.name}`, 172, 100);
  ctx.font = `${fontsInfo}px Play-Bold`;
  ctx.fillStyle = "#000000";
  ctx.textAlign = "start";
  fontSize = 20;
  ctx.fillText(`Gi·ªõi t√≠nh: ${gender}`, 260, 217);
  ctx.fillText(`Follow: ${res.follow}`, 260, 257);
  ctx.fillText(`M·ªëi quan h·ªá: ${love}`, 260, 295);
  ctx.fillText(`Sinh nh·∫≠t: ${birthday}`, 260, 177);
  ctx.fillText(`N∆°i ·ªü: ${location}`, 260, 333);
  ctx.fillText(`Qu√™ h∆∞∆°ng: ${hometown}`, 260, 372);
  ctx.font = `${fontsUid}px Play-Bold`;
  ctx.fillStyle = "#000033";
  ctx.textAlign = "start";
  fontSize = 20;  
  ctx.fillText(`${uid}`, 197, 423);
  ctx.font = `${fontsLink}px Play-Bold`;
  ctx.fillStyle = "#FF9999";
  ctx.textAlign = "start";
  fontSize = 20;  
  //ctx.fillText(`¬ª Profile: ${res.link}`, 200, 400);
  ctx.beginPath();
  const imageBuffer = canvas.toBuffer();
  fs.writeFileSync(pathImg, imageBuffer);
  fs.removeSync(pathAvata);
  
  return api.sendMessage(
    {body: `
üé®===„Äå ùóñùóîùó•ùóóùóúùó°ùóôùó¢ ùó®ùó¶ùóòùó• „Äç===üé®
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üë§ ùóßùó≤ÃÇùóª: ${res.name}
üéé ùóöùó∂ùóºÃõÃÅùó∂ ùòÅùó∂ÃÅùóªùóµ: ${gender}
üî∞ ùóôùóºùóπùóπùóºùòÑùó≤ùóøùòÄ: ${res.follow}
üíñ ùó†ùóºÃÇÃÅùó∂ ùóæùòÇùóÆùóª ùóµùó≤Ã£ÃÇ: ${love}
üéÇ ùó¶ùó∂ùóªùóµ ùóªùóµùóÆÃ£ÃÇùòÅ: ${birthday}
üåç ùó©ùó∂Ã£ ùòÅùóøùó∂ÃÅ: ${hometown}
üîó ùó®ùóúùóó ùóôùóÆùó∞ùó≤ùóØùóºùóºùó∏: ${uid}
üåê ùóüùó∂ùóªùó∏ ùóôùóÆùó∞ùó≤ùóØùóºùóºùó∏: ${res.link}
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üëâ ùóßùóÆÃ£ùóº ùòÅùóµùóÆÃÄùóªùóµ ùó∞ùóºÃÇùóªùó¥ ùó∞ùóÆùóøùó±ùó∂ùóªùó≥ùóº ùó∞ùóµùóº ùóØùóÆÃ£ùóª, ùóØùóÆÃ£ùóª ùó∞ùóºÃÅ ùòÅùóµùó≤ÃÇÃâ ùòÅùóµùòÇÃõÃâ ùóªùóµùó∂ùó≤ÃÇÃÄùòÇ ùó∏ùó∂ùó≤ÃÇÃâùòÇ ùó∏ùóµùóÆÃÅùó∞`, attachment: fs.createReadStream(pathImg) },
    threadID,
    () => fs.unlinkSync(pathImg),
    messageID
  );
};
          case "13": {
            const fonts = "/cache/Play-Bold.ttf"
const downfonts = "https://drive.google.com/u/0/uc?id=1uni8AiYk7prdrC7hgAmezaGTMH5R8gW8&export=download"
const fontsLink = 5
const fontsInfo = 30
const colorName = "#000000"
            let { senderID, threadID, messageID } = event;
  const { loadImage, createCanvas } = require("canvas");
  const request = require('request');
  const fs = global.nodemodule["fs-extra"];
  const axios = global.nodemodule["axios"];
  const Canvas = global.nodemodule["canvas"];
  let pathImg = __dirname + `/cache/${senderID}123${threadID}.png`;
  let pathAvata = __dirname + `/cache/avtuserrd.png`;
  /*                 */
  if(event.type == "message_reply") { uid = event.messageReply.senderID }
    else uid = event.senderID;
    const res = await api.getUserInfoV2(event.senderID); 
  let getAvatarOne = (await axios.get(`https://graph.facebook.com/${event.senderID}/picture?height=1500&width=1500&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`, { responseType: 'arraybuffer' })).data;
  let bg = (
    await axios.get(encodeURI(`https://i.imgur.com/nX5W2Ru.jpg`), {
      responseType: "arraybuffer",
    })
  ).data;
  fs.writeFileSync(pathAvata, Buffer.from(getAvatarOne, 'utf-8'));
  avataruser = await this.circle(pathAvata);
  fs.writeFileSync(pathImg, Buffer.from(bg, "utf-8"));

/*-----------------download----------------------*/
if(!fs.existsSync(__dirname+`${fonts}`)) { 
      let getfont = (await axios.get(`${downfonts}`, { responseType: "arraybuffer" })).data;
       fs.writeFileSync(__dirname+`${fonts}`, Buffer.from(getfont, "utf-8"));
    };
/*---------------------------------------------*/

  let baseImage = await loadImage(pathImg);
  let baseAvata = await loadImage(avataruser);
  let canvas = createCanvas(baseImage.width, baseImage.height);
  let ctx = canvas.getContext("2d");
  ctx.drawImage(baseImage, 0, 0, canvas.width, canvas.height);
  ctx.drawImage(baseAvata, 1100, 550, 400, 400);
    var gender = res.gender == 'male' ? "Male" : res.gender == 'female' ? "Female" : "Not Found";
    var birthday = res.birthday ? `${res.birthday}` : "Not Found";
    var love = res.relationship_status ? `${res.relationship_status}` : "Not Found"
    var location = res.location.name ? `${res.location.name}` : "Not Found"
    var hometown = res.hometown.name ? `${res.hometown.name}` : "Not Found"
  Canvas.registerFont(__dirname+`${fonts}`, {
        family: "Play-Bold"
    });
  ctx.font = `${fontsInfo}px Play-Bold`;
  ctx.fillStyle = "#00bbff";
  ctx.textAlign = "start";
  fontSize = 25;
  ctx.fillText(`Name: ${res.name}`, 150, 122);
  ctx.fillText(`Gender: ${gender}`, 150, 132);
  ctx.fillText(`Followers: ${res.follow}`, 150, 142);
  ctx.fillText(`Relationship: ${love}`, 150, 152);
  ctx.fillText(`Birthday: ${birthday}`, 150, 162);
  ctx.fillText(`Location: ${location}`, 150, 172);
  ctx.fillText(`UID: ${uid}`, 150, 182);
  ctx.font = `${fontsLink}px Play-Bold`;
  ctx.fillStyle = "#ffffff";
  ctx.textAlign = "start";
  fontSize = 20;  
  ctx.fillText(`${res.link} `, 180, 468);
  ctx.beginPath();
  const imageBuffer = canvas.toBuffer();
  fs.writeFileSync(pathImg, imageBuffer);
  fs.removeSync(pathAvata);
  
  return api.sendMessage(
    {body: `
üé®===„Äå ùóñùóîùó•ùóóùóúùó°ùóôùó¢ ùó®ùó¶ùóòùó• „Äç===üé®
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üë§ ùóßùó≤ÃÇùóª: ${res.name}
üéé ùóöùó∂ùóºÃõÃÅùó∂ ùòÅùó∂ÃÅùóªùóµ: ${gender}
üî∞ ùóôùóºùóπùóπùóºùòÑùó≤ùóøùòÄ: ${res.follow}
üíñ ùó†ùóºÃÇÃÅùó∂ ùóæùòÇùóÆùóª ùóµùó≤Ã£ÃÇ: ${love}
üéÇ ùó¶ùó∂ùóªùóµ ùóªùóµùóÆÃ£ÃÇùòÅ: ${birthday}
üåç ùó©ùó∂Ã£ ùòÅùóøùó∂ÃÅ: ${location}
üîó ùó®ùóúùóó ùóôùóÆùó∞ùó≤ùóØùóºùóºùó∏: ${uid}
üåê ùóüùó∂ùóªùó∏ ùóôùóÆùó∞ùó≤ùóØùóºùóºùó∏: ${res.link}
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üëâ ùóßùóÆÃ£ùóº ùòÅùóµùóÆÃÄùóªùóµ ùó∞ùóºÃÇùóªùó¥ ùó∞ùóÆùóøùó±ùó∂ùóªùó≥ùóº ùó∞ùóµùóº ùóØùóÆÃ£ùóª, ùóØùóÆÃ£ùóª ùó∞ùóºÃÅ ùòÅùóµùó≤ÃÇÃâ ùòÅùóµùòÇÃõÃâ ùóªùóµùó∂ùó≤ÃÇÃÄùòÇ ùó∏ùó∂ùó≤ÃÇÃâùòÇ ùó∏ùóµùóÆÃÅùó∞`, attachment: fs.createReadStream(pathImg) },
    threadID,
    () => fs.unlinkSync(pathImg),
    messageID
  );
};
          case "14":
            {
              
            const sendWaiting = true; // b·∫≠t ho·∫∑c t·∫Øt g·ª≠i tin nh·∫Øn "ƒëang t·∫°o h√¨nh ·∫£nh, vui ·ªìng ch·ªù ƒë·ª£i...";
const textWaiting = "ƒêang kh·ªüi t·∫°o h√¨nh ·∫£nh, vui l√≤ng ch·ªù ƒë·ª£i trong gi√¢y l√°t";
const fonts = "/cache/Play-Bold.ttf"
const downfonts = "https://drive.google.com/u/0/uc?id=1uni8AiYk7prdrC7hgAmezaGTMH5R8gW8&export=download"
const fontsLink = 40
const Name = 52
const fontsInfo = 50
const colorName = "#00FFFF"
let { senderID, threadID, messageID } = event;
  const { loadImage, createCanvas } = require("canvas");
  const request = require('request');
  const fs = global.nodemodule["fs-extra"];
  const axios = global.nodemodule["axios"];
  const Canvas = global.nodemodule["canvas"];
  let pathImg = __dirname + `/cache/1.png`;
  let pathAvata = __dirname + `/cache/2.png`;
  /*                 */
  if(event.type == "message_reply") { uid = event.messageReply.senderID }
    else uid = event.senderID;
    const res = await api.getUserInfoV2(event.senderID); 
  let getAvatarOne = (await axios.get(`https://graph.facebook.com/${event.senderID}/picture?height=1500&width=1500&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`, { responseType: 'arraybuffer' })).data;
  let bg = (
    await axios.get(encodeURI(`https://i.imgur.com/TFbVhfN.jpg`), {
      responseType: "arraybuffer",
    })
  ).data;
  fs.writeFileSync(pathAvata, Buffer.from(getAvatarOne, 'utf-8'));
  avataruser = await this.circle(pathAvata);
  fs.writeFileSync(pathImg, Buffer.from(bg, "utf-8"));

/*-----------------download----------------------*/
if(!fs.existsSync(__dirname+`${fonts}`)) { 
      let getfont = (await axios.get(`${downfonts}`, { responseType: "arraybuffer" })).data;
       fs.writeFileSync(__dirname+`${fonts}`, Buffer.from(getfont, "utf-8"));
    };
/*---------------------------------------------*/

  let baseImage = await loadImage(pathImg);
  let baseAvata = await loadImage(avataruser);
  let canvas = createCanvas(baseImage.width, baseImage.height);
  let ctx = canvas.getContext("2d");
  ctx.drawImage(baseImage, 0, 0, canvas.width, canvas.height);
  ctx.drawImage(baseAvata, 82, 305, 479, 479);
    var gender = res.gender == 'male' ? "Nam" : res.gender == 'female' ? "NuÃõÃÉ" : "Kh√¥ng c√¥ng khai";
    var birthday = res.birthday ? `${res.birthday}` : "not found";
    var love = res.relationship_status ? `${res.relationship_status}` : "not found"
    var location = res.location.name ? `${res.location.name}` : "not found"
    var hometown = res.hometown.name ? `${res.hometown.name}` : "not found"
  Canvas.registerFont(__dirname+`${fonts}`, {
        family: "Play-Bold"
    });
  ctx.font = `${fontsInfo}px Play-Bold`;
  ctx.fillStyle = "#110000";
  ctx.textAlign = "start";
  fontSize = 390;
  ctx.fillText(`: ${res.follow}`, 827, 720);
  ctx.fillText(`: ${love}`, 1005, 642);
  ctx.fillText(`: ${birthday}`, 1005, 812);
  ctx.fillText(`: ${location}`, 959, 552);
  ctx.fillText(`: ${hometown}`, 918, 462);
  ctx.fillText(`¬ª UID: ${uid}`, 215, 868);
  ctx.font = `${Name}px Play-Bold`;
  ctx.fillStyle = "#003300";
  ctx.textAlign = "start";
  fontSize = 390;    
  ctx.fillText(` ${res.name} `, 682, 375);
  ctx.beginPath();
  ctx.font = `${fontsLink}px ArialUnicodeMS`;
  ctx.fillStyle = "#FF0000";
  ctx.textAlign = "start";
  fontSize = 390;    
  ctx.fillText(` ${res.link}`, 323, 918);
  ctx.beginPath();
  const imageBuffer = canvas.toBuffer();
  fs.writeFileSync(pathImg, imageBuffer);
  fs.removeSync(pathAvata);
  
  return api.sendMessage(
    {body: `
üé®===„Äå ùóñùóîùó•ùóóùóúùó°ùóôùó¢ ùó®ùó¶ùóòùó• „Äç===üé®
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üë§ ùóßùó≤ÃÇùóª: ${res.name}
üéé ùóöùó∂ùóºÃõÃÅùó∂ ùòÅùó∂ÃÅùóªùóµ: ${gender}
üî∞ ùóôùóºùóπùóπùóºùòÑùó≤ùóøùòÄ: ${res.follow}
üíñ ùó†ùóºÃÇÃÅùó∂ ùóæùòÇùóÆùóª ùóµùó≤Ã£ÃÇ: ${love}
üéÇ ùó¶ùó∂ùóªùóµ ùóªùóµùóÆÃ£ÃÇùòÅ: ${birthday}
üåç ùó©ùó∂Ã£ ùòÅùóøùó∂ÃÅ: ${hometown}
üîó ùó®ùóúùóó ùóôùóÆùó∞ùó≤ùóØùóºùóºùó∏: ${uid}
üåê ùóüùó∂ùóªùó∏ ùóôùóÆùó∞ùó≤ùóØùóºùóºùó∏: ${res.link}
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üëâ ùóßùóÆÃ£ùóº ùòÅùóµùóÆÃÄùóªùóµ ùó∞ùóºÃÇùóªùó¥ ùó∞ùóÆùóøùó±ùó∂ùóªùó≥ùóº ùó∞ùóµùóº ùóØùóÆÃ£ùóª, ùóØùóÆÃ£ùóª ùó∞ùóºÃÅ ùòÅùóµùó≤ÃÇÃâ ùòÅùóµùòÇÃõÃâ ùóªùóµùó∂ùó≤ÃÇÃÄùòÇ ùó∏ùó∂ùó≤ÃÇÃâùòÇ ùó∏ùóµùóÆÃÅùó∞`, attachment: fs.createReadStream(pathImg) },
    threadID,
    () => fs.unlinkSync(pathImg),
    messageID
  );
};
          case "15": {
            const { loadImage, createCanvas , registerFont} = require("canvas");
  const { threadID, senderID, type, messageReply } = event;  
  const fs = global.nodemodule["fs-extra"];
  const axios = global.nodemodule["axios"];
let pathImg = __dirname + "/cache/tan.png";
  let pathAvt1 = __dirname + "/cache/Avtmot.png";
  if (type == "message_reply") uid = messageReply.senderID;
  else uid = senderID;1
  var cc = await api.getUserInfoV5(event.senderID);
  //console.log(cc[0].o0.data.messaging_actors[0])
  var name = cc[0].o0.data.messaging_actors[0].name;
  var gender = cc[0].o0.data.messaging_actors[0].gender;
  var id = cc[0].o0.data.messaging_actors[0].id;
  var url = cc[0].o0.data.messaging_actors[0].url;
  var username = cc[0].o0.data.messaging_actors[0].username;
  var shortname = cc[0].o0.data.messaging_actors[0].short_name;
  var friend = cc[0].o0.data.messaging_actors[0].is_viewer_friend; 
  var cv = cc[0].o0.data.messaging_actors[0].work_info; 
  var mess = cc[0].o0.data.messaging_actors[0].is_messenger_user; 
  var chucvu = cc[0].o0.data.messaging_actors[0].is_employee; 
  var block = cc[0].o0.data.messaging_actors[0].is_message_blocked_biewer; 
  var background = ["https://i.imgur.com/Vblq0gn.jpg"];
    var rd = background[Math.floor(Math.random() * background.length)];
    let t√¢n = (
    await axios.get(`https://graph.facebook.com/${event.senderID}/picture?width=720&height=720&access_token=6628568379%7Cc1e620fa708a1d5696fb991c1bde5662`,
      { responseType: "arraybuffer" }
    )
  ).data;
  fs.writeFileSync(pathAvt1, Buffer.from(t√¢n, "utf-8"));
  ben = await this.circle(pathAvt1);
  let getbackground = (
    await axios.get(`${rd}`, {
      responseType: "arraybuffer",
    })
  ).data;
  fs.writeFileSync(pathImg, Buffer.from(getbackground, "utf-8"));
  let font = (await axios.get(`https://github.com/hanakuUwU/font/raw/main/CaviarDreams.ttf`, { responseType: "arraybuffer" })).data;
      fs.writeFileSync(__dirname + `/tad/CaviarDreams.ttf`, Buffer.from(font, "utf-8"));
  let baseImage = await loadImage(pathImg);
    let baseAvt1 = await loadImage(ben);
    let canvas = createCanvas(baseImage.width, baseImage.height);
    let ctx = canvas.getContext("2d");
    ctx.drawImage(baseImage, 0, 0, canvas.width, canvas.height);
    ctx.drawImage(baseAvt1, 150, 115, 170, 170);
registerFont(__dirname + `/tad/CaviarDreams.ttf`, {
family: "time"
    });
    ctx.textAlign = "start";
    ctx.fillStyle = "#eae6f2";
    ctx.font = "26px time"; ctx.fillText(`T√™n: ${name}\nUsername:\n${username == true ? "kh√¥ng c√≥" : username}\nSex: ${gender == "MALE" ? "Trai" : "g√°i"}`, 470, 135)
ctx.restore();
    ctx.save();
    ctx.beginPath(); 
    const imageBuffer = canvas.toBuffer();
    fs.writeFileSync(pathImg, imageBuffer);
    fs.removeSync(pathAvt1);
  return api.sendMessage({
    body: `====[ùêàùêçùêÖùêé]====\nüë§T√™n: ${name}\nüëÅT√™n ch√≠nh: ${shortname}\nü§≥Username: ${username == true? "kh√¥ng d√πng" : username}\nüëÄGi·ªõi t√≠nh: ${gender == "MALE" ? "Trai" : "N·ªØ"}\nüè∑Uid: ${id}\nLinkFB: ${url}\nü§ùB·∫°n b√®: ${friend == true ? "ƒê√£ k·∫øt b·∫°n v·ªõi bot" : "Ch∆∞a k·∫øt b·∫°n v·ªõi bot"}\nüëã${mess == true ? "ƒê√£ nh·∫Øn v·ªõi bot" : "ch∆∞a nh·∫Øn tin v·ªõi bot"}\nüôÑ${block == true ? "ƒê√£ ch·∫∑n tin nh·∫Øn bot" : "Kh√¥ng ch·∫∑n tin nh·∫Øn bot"}\nüó∫C√¥ng vi·ªác: ${cv == null ? "kh√¥ng c√≥" : cv}\nüíåCh·ª©c v·ª•: ${chucvu == null ? "Kh√¥ng c√≥" : chucvu}`, attachment: fs.createReadStream(pathImg) }, event.threadID, () => fs.unlinkSync(pathImg));
} 
            break;
					default:
           const choose = parseInt(event.body);
            	if (isNaN(event.body)) return api.sendMessage("ùêïùêÆùê¢ ùê•ùê®ÃÄùêßùê† ùêßùê°ùêöÃ£ÃÇùê© ùüè ùêúùê®ùêß ùê¨ùê®ÃÇÃÅ", event.threadID, event.messageID);
            	if (choose > 20 || choose < 1) return api.sendMessage("ùêãùêÆÃõÃ£ùêö ùêúùê°ùê®Ã£ùêß ùê§ùê°ùê®ÃÇùêßùê† ùêßùêöÃÜÃÄùê¶ ùê≠ùê´ùê®ùêßùê† ùêùùêöùêßùê° ùê¨ùêöÃÅùêúùê°.", event.threadID, event.messageID); 
    }
    }
}
      }